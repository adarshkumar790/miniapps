"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const Zc=require("react");function Yc(e,t){return Zc.useSyncExternalStore(n=>e.sub(n),e,t||e)}function jo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Xc(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function el(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function Se(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??el(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??Xc(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function K(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},jo())}}}function tl(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var nl=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function bn(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function et(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function qo(){return{kind:"schema",type:"any",reference:qo,expects:"any",async:!1,get"~standard"(){return K(this)},"~run"(e){return e.typed=!0,e}}}function Nt(e){return{kind:"schema",type:"boolean",reference:Nt,expects:"boolean",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:Se(this,"type",t,n),t}}}function yn(e){return{kind:"schema",type:"function",reference:yn,expects:"Function",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:Se(this,"type",t,n),t}}}function N(e,t){return{kind:"schema",type:"loose_object",reference:N,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return K(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:bn(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(Se(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)tl(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else Se(this,"type",n,r);return n}}}function Be(e,t){return{kind:"schema",type:"nullish",reference:Be,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return K(this)},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=bn(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Ht(e){return{kind:"schema",type:"number",reference:Ht,expects:"number",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Se(this,"type",t,n),t}}}function Ut(e,t){return{kind:"schema",type:"optional",reference:Ut,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return K(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=bn(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function ne(e){return{kind:"schema",type:"string",reference:ne,expects:"string",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:Se(this,"type",t,n),t}}}function Mo(){return{kind:"schema",type:"unknown",reference:Mo,expects:"unknown",async:!1,get"~standard"(){return K(this)},"~run"(e){return e.typed=!0,e}}}function zt(e,t,n){const r=e["~run"]({value:t},jo(n));if(r.issues)throw new nl(r.issues);return r.value}function To(...e){return{...e[0],pipe:e,get"~standard"(){return K(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function $o(e){return et(N({TelegramWebviewProxy:N({postEvent:yn()})}),e)}function Io(){try{return window.self!==window.top}catch{return!0}}var rl=Object.defineProperty,ol=(e,t,n)=>t in e?rl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zr=(e,t,n)=>ol(e,typeof t!="symbol"?t+"":t,n);function sl(e){return t=>t instanceof e}function Oo(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,sl(n)]}const[il,qm]=Oo("CancelledError","Promise was canceled"),[al,Mm]=Oo("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),Lo=Symbol("Resolved");function Yr(e){return Array.isArray(e)&&e[0]===Lo}function ul(e){return[Lo,e]}function Xr(e,t){return e.reject=t.reject,e.abort=t.abort,e}let Do=class Gt extends Promise{constructor(t,n){let r,o;super((s,i)=>{let a,u;typeof t=="function"?(a=t,u=n):u=t;const c=[],l=d=>(...I)=>{const ee=d(...I);return c.forEach(Tt=>Tt()),ee},p=new AbortController,{signal:m}=p;o=d=>{!m.aborted&&p.abort(d)};const f=()=>m.reason,x=d=>{const I=()=>{d(f())};m.addEventListener("abort",I,!0);const ee=()=>{m.removeEventListener("abort",I,!0)};return c.push(ee),ee},_e=l(d=>{s(d),o(ul(d))});r=l(d=>{i(d),o(d)}),u||(u={});const{abortSignal:P,rejectOnAbort:te=!0}=u;if(P)if(P.aborted){const{reason:d}=P;if(te)return r(d);o(d)}else{const d=()=>{o(P.reason)};P.addEventListener("abort",d),c.push(()=>{P.removeEventListener("abort",d)})}te&&x(i);const{timeout:k}=u;if(k){const d=setTimeout(()=>{o(new al(k))},k);c.push(()=>{clearTimeout(d)})}const E=()=>m.aborted,$=()=>Yr(f()),V=()=>{const d=f();return Yr(d)?d[1]:void 0};try{const d=a&&a(_e,r,{abortReason:f,abortSignal:m,isAborted:E,isResolved:$,onAborted:x,onResolved:I=>x(()=>{$()&&I(V())}),resolved:V,throwIfAborted(){if(E())throw f()}});d instanceof Promise&&d.catch(r)}catch(d){r(d)}}),Zr(this,"abort"),Zr(this,"reject"),this.abort=o,this.reject=r}static fn(t,n){return new Gt(async(r,o,s)=>{try{r(await t(s))}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new Gt((n,r)=>{r(t)})}cancel(){this.abort(new il)}catch(t){return this.then(void 0,t)}finally(t){return Xr(super.finally(t),this)}then(t,n){return Xr(super.then(t,n),this)}};function cl(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function ll(e){return Object.entries(e).reduce((t,[n,r])=>(t[cl(n)]=r,t),{})}function Qt(e){const t=ll(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Qt):Qt(r))}return t}function Ro(e){return`tapps/${e}`}function Vo(e,t){sessionStorage.setItem(Ro(e),JSON.stringify(t))}function pl(e){const t=sessionStorage.getItem(Ro(e));try{return t?JSON.parse(t):void 0}catch{}}function dl(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function fl(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:o}=t,s=o===void 0?!0:o,i=typeof s=="boolean"?()=>s:s;function a(u,c,...l){if(c||i()){const p="font-weight:bold;padding:0 5px;border-radius:5px";console[u](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${p};background-color: lightblue;color:black`,"",`${p};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...l)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function Fo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function ml(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function hl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function O(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??hl(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??ml(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function F(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Fo())}}}function Wo(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function bl(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var yl=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function No(e,t){return{kind:"validation",type:"check",reference:No,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&O(this,"input",n,r),n}}}function Ho(e){return{kind:"validation",type:"integer",reference:Ho,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&O(this,"integer",t,n),t}}}function oe(e){return{kind:"transformation",type:"transform",reference:oe,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Uo(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function _l(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function je(e){return{kind:"schema",type:"boolean",reference:je,expects:"boolean",async:!1,message:e,get"~standard"(){return F(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:O(this,"type",t,n),t}}}function zo(e){return{kind:"schema",type:"date",reference:zo,expects:"Date",async:!1,message:e,get"~standard"(){return F(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?O(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:O(this,"type",t,n),t}}}function Go(e,t){return{kind:"schema",type:"instance",reference:Go,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return F(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:O(this,"type",n,r),n}}}function _n(e){return{kind:"schema",type:"lazy",reference:_n,expects:"unknown",async:!1,getter:e,get"~standard"(){return F(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function Ee(e,t){return{kind:"schema",type:"loose_object",reference:Ee,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return F(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:Uo(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(O(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)Wo(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else O(this,"type",n,r);return n}}}function tt(e){return{kind:"schema",type:"number",reference:tt,expects:"number",async:!1,message:e,get"~standard"(){return F(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:O(this,"type",t,n),t}}}function v(e,t){return{kind:"schema",type:"optional",reference:v,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return F(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Uo(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Qo(e,t,n){return{kind:"schema",type:"record",reference:Qo,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return F(this)},"~run"(r,o){var s,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const u in a)if(Wo(a,u)){const c=a[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:a,key:u,value:c};for(const f of l.issues)f.path=[m],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:a,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else O(this,"type",r,o);return r}}}function _(e){return{kind:"schema",type:"string",reference:_,expects:"string",async:!1,message:e,get"~standard"(){return F(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:O(this,"type",t,n),t}}}function eo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function gn(e,t){return{kind:"schema",type:"union",reference:gn,expects:bl(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return F(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];O(this,"type",n,r,{issues:eo(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];O(this,"type",n,r,{issues:eo(i)})}return n}}}function Jo(){return{kind:"schema",type:"unknown",reference:Jo,expects:"unknown",async:!1,get"~standard"(){return F(this)},"~run"(e){return e.typed=!0,e}}}function Ko(e,t,n){const r=e["~run"]({value:t},Fo(n));if(r.issues)throw new yl(r.issues);return r.value}function se(...e){return{...e[0],pipe:e,get"~standard"(){return F(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function gl(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function vl(e){return Object.entries(e).reduce((t,[n,r])=>(t[gl(n)]=r,t),{})}function Jt(e){const t=vl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Jt):Jt(r))}return t}function vn(e){return oe(t=>e?Jt(t):t)}function Zo(e){return t=>se(e,vn(t))}function wl(e){return(t,n)=>Ko(se(e,vn(n)),t)}function wn(){return oe(JSON.parse)}function Sn(e){const t=Zo(e);return n=>se(_(),wn(),t(n))}function Sl(e){return oe(t=>{const n={};return new URLSearchParams(t).forEach((r,o)=>{const s=n[o];Array.isArray(s)?s.push(r):s===void 0?n[o]=r:n[o]=[s,r]}),Ko(e,n)})}function Yo(e){return t=>se(gn([_(),Go(URLSearchParams)]),Sl(e),vn(t))}const to=v(_n(()=>xl())),kl=Ee({id:tt(),photo_url:v(_()),type:_(),title:_(),username:v(_())}),El=Ee({added_to_attachment_menu:v(je()),allows_write_to_pm:v(je()),first_name:_(),id:tt(),is_bot:v(je()),is_premium:v(je()),last_name:v(_()),language_code:v(_()),photo_url:v(_()),username:v(_())}),Al=Ee({auth_date:se(_(),oe(e=>new Date(Number(e)*1e3)),zo()),can_send_after:v(se(_(),oe(Number),Ho())),chat:v(_n(()=>Cl())),chat_type:v(_()),chat_instance:v(_()),hash:_(),query_id:v(_()),receiver:to,start_param:v(_()),signature:_(),user:to}),Cl=Sn(kl),xl=Sn(El),Pl=Yo(Al);function Bl(e){return/^#[\da-f]{6}$/i.test(e)}const Xo=Zo(Qo(_(),se(gn([_(),tt()]),oe(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),No(Bl)))),$t=v(se(_(),oe(e=>e==="1"))),no=Sn(Xo()),jl=Ee({tgWebAppBotInline:$t,tgWebAppData:v(Pl()),tgWebAppDefaultColors:v(no()),tgWebAppFullscreen:$t,tgWebAppPlatform:_(),tgWebAppShowSettings:$t,tgWebAppStartParam:v(_()),tgWebAppThemeParams:no(),tgWebAppVersion:_()}),es=Yo(jl),ql=wl(es()),ts=Ee({eventType:_(),eventData:v(Jo())});function ns(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,o])=>(Array.isArray(o)?n.push(...o.map(s=>[r,String(s)])):o!=null&&n.push([r,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":t(r,o)]),n),[])).toString()}function Ml(e){return ns(e)}function Tl(e){return ns(e,(t,n)=>t==="tgWebAppData"?Ml(n):JSON.stringify(n))}function rs(e){try{return _l(es(),e)}catch{return!1}}function $l(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}function Il(e,t){const n=$l(),r=new Map,o=(s,i,a)=>{a||(a=!1);const u=r.get(s)||new Map;r.set(s,u);const c=u.get(i)||[];u.set(i,c);const l=c.findIndex(p=>p[1]===a);l>=0&&(n.off(s,c[l][0]),c.splice(l,1),!c.length&&u.delete(i),u.size||(r.delete(s),!r.size&&t()))};return[function(s,i,a){!r.size&&e();function u(){o(s,i,a)}function c(...m){a&&u(),s==="*"?i(m):i(...m)}n.on(s,c);const l=r.get(s)||new Map;r.set(s,l);const p=l.get(i)||[];return l.set(i,p),p.push([c,a||!1]),u},o,n.emit,function(){const s=n.all.size;n.all.clear(),r.clear(),s&&t()}]}function Kt(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let ze=!1;const[kn,Ol]=fl("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return ze}}),ro=e=>{kn(!1,"Event received:",e)};function Ll(e){e!==ze&&(ze=e,ze?C("*",ro):q("*",ro))}const Dl={clipboard_text_received:N({req_id:ne(),data:Be(ne())}),custom_method_invoked:N({req_id:ne(),result:Ut(Mo()),error:Ut(ne())}),popup_closed:Be(N({button_id:Be(ne(),()=>{})}),{}),viewport_changed:N({height:Ht(),width:Be(Ht(),()=>window.innerWidth),is_state_stable:Nt(),is_expanded:Nt()}),theme_changed:N({theme_params:Xo()})};function oo(e){if(e.source!==window.parent)return;let t;try{t=zt(To(ne(),wn(),ts),e.data)}catch{return}const{eventType:n,eventData:r}=t,o=Dl[n];try{const s=o?zt(o,r):r;Rl(n,s)}catch(s){Ol(!0,[`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,s)}}const[C,q,Rl,Tm]=Il(()=>{const e=window,t={receiveEvent:Kt};e.TelegramGameProxy_receiveEvent=Kt,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",oo)},()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]}),window.removeEventListener("message",oo)});function Vl(e){return t=>t instanceof e}function Ae(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Vl(n)]}const[os,Fl]=Ae("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[ss,Wl]=Ae("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]),Nl=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join(`
`),[is,Hl]=Ae("LaunchParamsRetrieveError",Nl),[as,Ul]=Ae("InvalidLaunchParamsError",e=>[`Invalid value for launch params: ${e}`]),[us,zl]=Ae("UnknownEnvError"),[cs,Gl]=Ae("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);function Ql(e,t){t()}function Jl(e,t){t||(t={});const n=t.equals||Object.is;let r=[],o=e;const s=c=>{if(!n(o,c)){const l=o;o=c,Ql(u,()=>{[...r].forEach(([p,m])=>{p(c,l),m&&a(p,!0)})})}};function i(c){const l=typeof c!="object"?{once:c}:c;return{once:l.once||!1,signal:l.signal||!1}}const a=(c,l)=>{const p=i(l),m=r.findIndex(([f,x])=>f===c&&x.once===p.once&&x.signal===p.signal);m>=0&&r.splice(m,1)},u=Object.assign(function(){return Kl(u),o},{destroy(){r=[]},set:s,reset(){s(e)},sub(c,l){return r.push([c,i(l)]),()=>a(c,l)},unsub:a,unsubAll(){r=r.filter(c=>c[1].signal)}});return u}const It=[];function Kl(e){It.length&&It[It.length-1].add(e)}const ls=Jl("https://web.telegram.org");function En(e,t){kn(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(Io())return n.parent.postMessage(r,ls());if($o(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(et(N({external:N({notify:yn()})}),n)){n.external.notify(r);return}throw new us}function An(e,t,n){n||(n={});const{capture:r}=n,[o,s]=dl();return new Do(i=>{(Array.isArray(t)?t:[t]).forEach(a=>{o(C(a,u=>{(!r||(Array.isArray(t)?r({event:a,payload:u}):r(u)))&&i(u)}))}),(n.postEvent||En)(e,n.params)},n).finally(s)}const so="launchParams";function io(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function Cn(){for(const e of[()=>io(window.location.href),()=>{const t=performance.getEntriesByType("navigation")[0];return t&&io(t.name)},()=>pl(so)]){const t=e();if(t&&rs(t))return Vo(so,t),t}throw new is}function nt(e){const t=ql(Cn());return e?Qt(t):t}function Zt(e,t){if(!e)try{return nt(),!0}catch{return!1}return Do.fn(async n=>{if($o(window))return!0;try{return await An("web_app_request_theme","theme_changed",n),!0}catch{return!1}},t||{timeout:100})}function Zl({launchParams:e,onEvent:t}={}){if(e){const o=typeof e=="string"||e instanceof URLSearchParams?e.toString():Tl({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");if(!rs(o))throw new as(o);Vo("launchParams",o)}if(Io()){const o=To(ne(),wn(),ts),s=window.parent.postMessage.bind(window.parent);window.parent.postMessage=(...i)=>{const[a]=i,u=()=>{s(...i)};if(et(o,a)&&t){const c=zt(o,a);t([c.eventType,c.eventData],u)}else u()};return}const n=window.TelegramWebviewProxy||{},{postEvent:r}=n;window.TelegramWebviewProxy={...n,postEvent(o,s){const i=()=>{r&&r(o,s)};t?t([o,s?JSON.parse(s):void 0],i):i()}},kn(!1,"Environment was mocked by the mockTelegramEnv function")}function ps(){return new URLSearchParams(Cn()).get("tgWebAppData")||void 0}function ds(e){return({req_id:t})=>t===e}function ao(e){return e.split(".").map(Number)}function Yl(e,t){const n=ao(e),r=ao(t),o=Math.max(n.length,r.length);for(let s=0;s<o;s+=1){const i=n[s]||0,a=r[s]||0;if(i!==a)return i>a?1:-1}return 0}function B(e,t){return Yl(e,t)<=0}function ie(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return B("6.4",n);if(t==="try_browser")return B("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return B("6.9",n);if(e==="web_app_close"&&t==="return_back")return B("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return B("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return B("6.1",t);case"web_app_open_popup":return B("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return B("6.4",t);case"web_app_switch_inline_query":return B("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return B("6.9",t);case"web_app_setup_settings_button":return B("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return B("7.2",t);case"web_app_setup_swipe_behavior":return B("7.7",t);case"web_app_share_to_story":return B("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return B("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return B("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function fs(e,t){t||(t="strict");const n=typeof t=="function"?t:r=>{const{method:o,version:s}=r,i="param"in r?new ss(o,r.param,s):new os(o,s);if(t==="strict")throw i;return console.warn(i.message)};return(r,o)=>ie(r,e)?r==="web_app_set_header_color"&&et(N({color:qo()}),o)&&!ie(r,"color",e)?n({version:e,method:r,param:"color"}):En(r,o):n({version:e,method:r})}function Xl(e,t,n,r){return An("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:n},capture:ds(n)}).then(({result:o,error:s})=>{if(s)throw new cs(s);return o})}function ms(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function ep(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`)}function hs(e){return`tapps/${e}`}function U(e,t){sessionStorage.setItem(hs(e),JSON.stringify(t))}function z(e){const t=sessionStorage.getItem(hs(e));try{return t?JSON.parse(t):void 0}catch{}}function xn(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function tp(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:o}=t,s=o===void 0?!0:o,i=typeof s=="boolean"?()=>s:s;function a(u,c,...l){if(c||i()){const p="font-weight:bold;padding:0 5px;border-radius:5px";console[u](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${p};background-color: lightblue;color:black`,"",`${p};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...l)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function np(){return performance.getEntriesByType("navigation")[0]}function G(){const e=np();return!!e&&e.type==="reload"}let ve;function rp(e,t){ve&&ve.set(e,t)||t()}function Yt(e){if(ve)return e();ve=new Map;try{e()}finally{ve.forEach(t=>t()),ve=void 0}}function bs(e,t){t||(t={});const n=t.equals||Object.is;let r=[],o=e;const s=c=>{if(!n(o,c)){const l=o;o=c,rp(u,()=>{[...r].forEach(([p,m])=>{p(c,l),m&&a(p,!0)})})}};function i(c){const l=typeof c!="object"?{once:c}:c;return{once:l.once||!1,signal:l.signal||!1}}const a=(c,l)=>{const p=i(l),m=r.findIndex(([f,x])=>f===c&&x.once===p.once&&x.signal===p.signal);m>=0&&r.splice(m,1)},u=Object.assign(function(){return op(u),o},{destroy(){r=[]},set:s,reset(){s(e)},sub(c,l){return r.push([c,i(l)]),()=>a(c,l)},unsub:a,unsubAll(){r=r.filter(c=>c[1].signal)}});return u}const Me=[];function op(e){Me.length&&Me[Me.length-1].add(e)}function sp(e,t){let n=new Set,r;function o(){return r||(r=bs(i(),t))}function s(){o().set(i())}function i(){n.forEach(c=>{c.unsub(s,{signal:!0})});const a=new Set;let u;Me.push(a);try{u=e()}finally{Me.pop()}return a.forEach(c=>{c.sub(s,{signal:!0})}),n=a,u}return Object.assign(function(){return o()()},{destroy(){o().destroy()},sub(...a){return o().sub(...a)},unsub(...a){o().unsub(...a)},unsubAll(...a){o().unsubAll(...a)}})}function Ce(e,t){return bs(e,t)}function b(e,t){return sp(e,t)}function y(e,t){const n=Ce(e,t);return[n,b(n)]}let ys=!1;const[Xt,$m]=tp("SDK",{bgColor:"forestgreen",textColor:"white",shouldLog(){return ys}});function ip(e){ys=e,Ll(e)}const Ot=Ce(0),_s=Ce(En),[uo,Pn]=y({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),re=b(()=>Pn().tgWebAppVersion);function gs(e){e||(e={});const{postEvent:t}=e,n=e.launchParams||nt();uo.set(n),_s.set(typeof t=="function"?t:fs(n.tgWebAppVersion)),Xt(!1,"The package was configured. Launch params:",uo())}function Bn(){return Ot.set(Ot()+1),Ot().toString()}function fe(e,t,n){return Xl(e,t,Bn(),{...n||{},postEvent:h})}const S=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=h),An(e,t,n)),h=(e,t)=>_s()(e,t);function Q(e){return b(()=>ie(e,re()))}function ap(e){return t=>t instanceof e}function Z(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,ap(n)]}function me(e){return[e]}const[rt,up]=Z("CSSVarsBoundError","CSS variables are already bound"),[jn,cp]=Z("NotAvailableError",me),[lp,pp]=Z("InvalidEnvError",me),[ge,dp]=Z("FunctionNotAvailableError",me),[H,fp]=Z("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[vs,mp]=Z("ConcurrentCallError",me),[ws,hp]=Z("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[qn,bp]=Z("AccessDeniedError",me),[Ss,yp]=Z("FullscreenFailedError",me),[ks,_p]=Z("ShareMessageError",me);function en(){return typeof window>"u"}function A(e,t,n){n||(n={});const{isSupported:r,isMounted:o,isMounting:s,component:i,supports:a}=n||{},u=`${i?`${i}.`:""}${e}()`,c=r?Array.isArray(r)||typeof r=="object"&&"any"in r?r:[r]:void 0;function l(k){if(a){const E=a[k];return ie(E[0],E[1],re())}return!0}function p(){if(!c)return;function k(V){return typeof V=="function"?V():ie(V,re())?void 0:`it is unsupported in Mini Apps version ${re()}`}const E=Array.isArray(c)?c:c.any,$=E.map(k).filter(Boolean);return Array.isArray(c)?$[0]:$.length===E.length?$[$.length-1]:void 0}function m(...k){for(const E in a)if(a[E][2](...k)&&!l(E))return`option ${E} is not supported in Mini Apps version ${re()}`}let f;if(a){f={};for(const k in a)f[k]=b(()=>l(k))}const x=b(()=>!p()),_e=b(()=>re()!=="0.0"),P=b(()=>!o||o()),te=b(()=>Zt()&&!en()&&_e()&&x()&&P());return Object.assign((...k)=>{const E=`Unable to call the ${u} ${i?"method":"function"}:`;if(en()||!Zt())throw new ge(`${E} it can't be called outside Mini Apps`);if(!_e())throw new ge(`${E} the SDK was not initialized. Use the SDK init() function`);const $=p();if($)throw new ge(`${E} ${$}`);const V=m(...k);if(V)throw new ge(`${E} ${V}`);if(!P()){const d=s&&s()?"mounting. Wait for the mount completion":`unmounted. Use the ${i}.mount() method`;throw new ge(`${E} the component is ${d}`)}return t(...k)},t,{isAvailable:te,ifAvailable(...k){return te()?[!0,t(...k)]:[!1]}},c?{isSupported:x}:{},f?{supports:f}:{})}function ot(e,t){return t||(t={}),(n,r,o,s)=>A(n,r,{...t,isSupported:o||t.isSupported,supports:s,component:e})}function ce(e,t,n){return ot(e,{isSupported:n,isMounted:t})}function R(e,t){return ot(e,{isSupported:t})}const st="web_app_setup_back_button",Es="back_button_pressed",it="backButton",[co,As]=y(!1),[Qe,Cs]=y(!1),xs=Q(st),Ps=ce(it,Qe,st),Mn=R(it,st),Bs=Ps("hide",()=>{Tn(!1)}),js=Mn("mount",()=>{Qe()||(Tn(G()&&z(it)||!1),Qe.set(!0))});function Tn(e){e!==co()&&(h(st,{is_visible:e}),U(it,e),co.set(e))}const qs=Mn("onClick",e=>C(Es,e)),Ms=Mn("offClick",e=>{q(Es,e)}),Ts=Ps("show",()=>{Tn(!0)});function $s(){Qe.set(!1)}const gp=Object.freeze(Object.defineProperty({__proto__:null,hide:Bs,isMounted:Cs,isSupported:xs,isVisible:As,mount:js,offClick:Ms,onClick:qs,show:Ts,unmount:$s},Symbol.toStringTag,{value:"Module"}));var vp=Object.defineProperty,wp=(e,t,n)=>t in e?vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tn=(e,t,n)=>wp(e,typeof t!="symbol"?t+"":t,n);function Sp(e){return t=>t instanceof e}function Is(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Sp(n)]}const[kp,Ep]=Is("CancelledError","Promise was canceled"),[Ap,Im]=Is("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),Os=Symbol("Resolved");function lo(e){return Array.isArray(e)&&e[0]===Os}function Cp(e){return[Os,e]}function po(e,t){return e.reject=t.reject,e.abort=t.abort,e}let j=class nn extends Promise{constructor(t,n){let r,o;super((s,i)=>{let a,u;typeof t=="function"?(a=t,u=n):u=t;const c=[],l=d=>(...I)=>{const ee=d(...I);return c.forEach(Tt=>Tt()),ee},p=new AbortController,{signal:m}=p;o=d=>{!m.aborted&&p.abort(d)};const f=()=>m.reason,x=d=>{const I=()=>{d(f())};m.addEventListener("abort",I,!0);const ee=()=>{m.removeEventListener("abort",I,!0)};return c.push(ee),ee},_e=l(d=>{s(d),o(Cp(d))});r=l(d=>{i(d),o(d)}),u||(u={});const{abortSignal:P,rejectOnAbort:te=!0}=u;if(P)if(P.aborted){const{reason:d}=P;if(te)return r(d);o(d)}else{const d=()=>{o(P.reason)};P.addEventListener("abort",d),c.push(()=>{P.removeEventListener("abort",d)})}te&&x(i);const{timeout:k}=u;if(k){const d=setTimeout(()=>{o(new Ap(k))},k);c.push(()=>{clearTimeout(d)})}const E=()=>m.aborted,$=()=>lo(f()),V=()=>{const d=f();return lo(d)?d[1]:void 0};try{const d=a&&a(_e,r,{abortReason:f,abortSignal:m,isAborted:E,isResolved:$,onAborted:x,onResolved:I=>x(()=>{$()&&I(V())}),resolved:V,throwIfAborted(){if(E())throw f()}});d instanceof Promise&&d.catch(r)}catch(d){r(d)}}),tn(this,"abort"),tn(this,"reject"),this.abort=o,this.reject=r}static fn(t,n){return new nn(async(r,o,s)=>{try{r(await t(s))}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new nn((n,r)=>{r(t)})}cancel(){this.abort(new kp)}catch(t){return this.then(void 0,t)}finally(t){return po(super.finally(t),this)}then(t,n){return po(super.then(t,n),this)}};function fo(e,t){return e.resolve=t.resolve,e}let xp=class rn extends j{constructor(t,n){let r,o;typeof t=="function"?(r=t,o=n):o=t;let s;super((i,a,u)=>{s=i,r&&r(i,a,u)},o),tn(this,"resolve"),this.resolve=s}static fn(t,n){return new rn((r,o,s)=>{try{Promise.resolve(t(s)).then(r,o)}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new rn((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return fo(super.finally(t),this)}then(t,n){return fo(super.then(t,n),this)}};function T(e,t,n){n||(n={});const{promise:r,error:o}=n,[s,i]=r?[r,b(r)]:y(),[a,u]=o?[o,b(o)]:y();return[Object.assign((...c)=>{if(s()){const p=new vs(t);return a.set(p),j.reject(p)}Yt(()=>{s.set(e(...c)),a.set(void 0)});let l;return s().catch(p=>{throw l=p,p}).finally(()=>{Yt(()=>{s.set(void 0),a.set(l)})})},e),[s,i,b(()=>!!s())],[a,u]]}function Fe(e,t,n){const[r,...o]=T(t,`The ${e} component is already mounting`),[s,i]=y(!1);return[(...a)=>s()?j.resolve():r(...a).then(u=>{Yt(()=>{s.set(!0),n(u)})}),...o,[s,i]]}const[$n,Ls]=y({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),Ds=b(()=>$n().available),mo="web_app_biometry_get_info",Rs=A("requestBiometry",e=>S(mo,"biometry_info_received",e),{isSupported:mo});function In(e){if(!Ep(e))throw e}function xe(e){const t=e();t&&t.catch(In).cancel()}const Le="biometry",at="web_app_biometry_request_auth",On="biometry_info_received",Vs=e=>{ut(Ln(e))};function Fs(){throw new jn("Biometry is not available")}function Ln(e){let t=!1,n=!1,r="",o=!1,s="",i=!1;return e.available&&(t=!0,n=e.token_saved,r=e.device_id,o=e.access_requested,s=e.type,i=e.access_granted),{available:t,tokenSaved:n,deviceId:r,type:s,accessGranted:i,accessRequested:o}}const Ws=Q(at),[Pp,Bp,jp,Ns]=Fe(Le,e=>{const t=G()&&z(Le);return t?j.resolve(t):Rs({abortSignal:e}).then(Ln)},e=>{C(On,Vs),ut(e)}),Hs=R(Le,at),Dn=ce(Le,Ns[0],at),Us=Hs("mount",Pp),[,Rn,zs]=Bp,[,Gs]=jp,[qp,Qs]=Ns,[Mp,Tp,$p]=T(e=>j.fn(async t=>{const n=$n();n.available||Fs();const r=await S(at,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:o}=r;return typeof o=="string"&&ut({...n,token:o}),r},e),"Biometry authentication is already in progress"),Js=Dn("authenticate",Mp),[,Vn,Ks]=Tp,[,Zs]=$p,Ys=Hs("openSettings",()=>{h("web_app_biometry_open_settings")}),[Ip,Op,Lp]=T(e=>j.fn(async t=>{const n=await S("web_app_biometry_request_access",On,{...e,...t,params:{reason:(e||{}).reason||""}}).then(Ln);return n.available||Fs(),ut(n),n.accessGranted},e),"Biometry access request is already in progress"),Xs=Dn("requestAccess",Ip),[,Fn,ei]=Op,[,ti]=Lp;function ut(e){$n.set(e),U(Le,e)}function ni(){[Vn,Fn,Rn].forEach(xe),q(On,Vs),qp.set(!1)}const ri=Dn("updateToken",e=>(e||(e={}),S("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status))),Dp=Object.freeze(Object.defineProperty({__proto__:null,authError:Zs,authPromise:Vn,authenticate:Js,isAuthenticating:Ks,isAvailable:Ds,isMounted:Qs,isMounting:zs,isRequestingAccess:ei,isSupported:Ws,mount:Us,mountError:Gs,mountPromise:Rn,openSettings:Ys,requestAccess:Xs,requestAccessError:ti,requestAccessPromise:Fn,state:Ls,unmount:ni,updateToken:ri},Symbol.toStringTag,{value:"Module"}));function ct(e,t){return ot(e,{isMounted:t})}const le=ot,lt="closingBehavior",[ho,oi]=y(!1),[on,Wn]=y(!1),si=ct(lt,Wn),Rp=le(lt),ii=si("disableConfirmation",()=>{Nn(!1)}),ai=si("enableConfirmation",()=>{Nn(!0)}),ui=Rp("mount",()=>{on()||(Nn(G()&&z(lt)||!1),on.set(!0))});function Nn(e){e!==ho()&&(h("web_app_setup_closing_behavior",{need_confirmation:e}),U(lt,e),ho.set(e))}function ci(){on.set(!1)}const Vp=Object.freeze(Object.defineProperty({__proto__:null,disableConfirmation:ii,enableConfirmation:ai,isConfirmationEnabled:oi,isMounted:Wn,mount:ui,unmount:ci},Symbol.toStringTag,{value:"Module"}));function li(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Fp(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function Wp(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function L(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??Wp(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??Fp(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function Y(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},li())}}}function pi(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Np(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var sn=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function di(e,t){return{kind:"validation",type:"check",reference:di,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&L(this,"input",n,r),n}}}function fi(e){return{kind:"validation",type:"integer",reference:fi,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&L(this,"integer",t,n),t}}}function Hn(e){return{kind:"transformation",type:"transform",reference:Hn,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function mi(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function hi(e,t){return{kind:"schema",type:"array",reference:hi,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){var o;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let i=0;i<s.length;i++){const a=s[i],u=this.item["~run"]({value:a},r);if(u.issues){const c={type:"array",origin:"value",input:s,key:i,value:a};for(const l of u.issues)l.path?l.path.unshift(c):l.path=[c],(o=n.issues)==null||o.push(l);if(n.issues||(n.issues=u.issues),r.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}}else L(this,"type",n,r);return n}}}function Un(e){return{kind:"schema",type:"date",reference:Un,expects:"Date",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?L(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:L(this,"type",t,n),t}}}function bi(e,t){return{kind:"schema",type:"instance",reference:bi,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:L(this,"type",n,r),n}}}function an(e,t){return{kind:"schema",type:"loose_object",reference:an,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:mi(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(L(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)pi(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else L(this,"type",n,r);return n}}}function zn(e){return{kind:"schema",type:"number",reference:zn,expects:"number",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:L(this,"type",t,n),t}}}function yi(e,t){return{kind:"schema",type:"optional",reference:yi,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Y(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=mi(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function _i(e,t,n){return{kind:"schema",type:"record",reference:_i,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Y(this)},"~run"(r,o){var s,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const u in a)if(pi(a,u)){const c=a[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:a,key:u,value:c};for(const f of l.issues)f.path=[m],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:a,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else L(this,"type",r,o);return r}}}function W(e){return{kind:"schema",type:"string",reference:W,expects:"string",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:L(this,"type",t,n),t}}}function bo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function gi(e,t){return{kind:"schema",type:"union",reference:gi,expects:Np(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];L(this,"type",n,r,{issues:bo(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];L(this,"type",n,r,{issues:bo(i)})}return n}}}function pt(e,t,n){const r=e["~run"]({value:t},li(n));if(r.issues)throw new sn(r.issues);return r.value}function Te(...e){return{...e[0],pipe:e,get"~standard"(){return Y(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}const vi="web_app_invoke_custom_method",We=R("cloudStorage",vi),wi=Q(vi),Gn=We("deleteItem",(e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?fe("deleteStorageValues",{keys:n},t).then():j.resolve()});function Hp(e,t){const n=Array.isArray(e)?e:[e];return n.length?fe("getStorageValues",{keys:n},t).then(r=>pt(_i(Te(W(),di(o=>n.includes(o))),W()),r)):j.resolve(typeof e=="string"?"":{})}const Si=We("getItem",Hp),Qn=We("getKeys",e=>fe("getStorageKeys",{},e).then(t=>pt(hi(W()),t))),ki=We("setItem",(e,t,n)=>fe("saveStorageValue",{key:e,value:t},n).then()),Up=We("clear",e=>Qn(e).then(Gn)),zp=Object.freeze(Object.defineProperty({__proto__:null,clear:Up,deleteItem:Gn,getItem:Si,getKeys:Qn,isSupported:wi,setItem:ki},Symbol.toStringTag,{value:"Module"})),Ne="web_app_trigger_haptic_feedback",Jn=R("hapticFeedback",Ne),Ei=Q(Ne),Ai=Jn("impactOccurred",e=>{h(Ne,{type:"impact",impact_style:e})}),Ci=Jn("notificationOccurred",e=>{h(Ne,{type:"notification",notification_type:e})}),xi=Jn("selectionChanged",()=>{h(Ne,{type:"selection_change"})}),Gp=Object.freeze(Object.defineProperty({__proto__:null,impactOccurred:Ai,isSupported:Ei,notificationOccurred:Ci,selectionChanged:xi},Symbol.toStringTag,{value:"Module"})),[Pi,Bi]=y(void 0);function X(e){return b(()=>{const t=Pi();return t?t[e]:void 0})}const Kn=X("auth_date"),Zn=X("can_send_after"),ji=b(()=>{const e=Kn(),t=Zn();return t&&e?new Date(e.getTime()+t*1e3):void 0}),qi=X("chat"),Mi=X("chat_type"),Ti=X("chat_instance"),$i=X("hash"),Ii=X("query_id"),[Qp,Oi]=y(),Li=X("receiver");function Di(){const e=nt();Pi.set(e.tgWebAppData),Qp.set(ps())}const Ri=X("start_param"),Vi=X("user"),Jp=Object.freeze(Object.defineProperty({__proto__:null,authDate:Kn,canSendAfter:Zn,canSendAfterDate:ji,chat:qi,chatInstance:Ti,chatType:Mi,hash:$i,queryId:Ii,raw:Oi,receiver:Li,restore:Di,startParam:Ri,state:Bi,user:Vi},Symbol.toStringTag,{value:"Module"})),Yn="web_app_open_invoice",Kp=R("invoice",Yn),Fi=Q(Yn);function Zp(e,t,n){let r;if(t==="url"){const{hostname:o,pathname:s}=new URL(e,window.location.href);if(o!=="t.me")throw new H(`Link has unexpected hostname: ${o}`);const i=s.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!i)throw new H('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=i}else r=e,n=t;return S(Yn,"invoice_closed",{...n,params:{slug:r},capture:o=>r===o.slug}).then(o=>o.status)}const[Yp,Xp,ed]=T(Zp,"Invoice is already opened"),Wi=Kp("open",Yp),[,Ni,Hi]=Xp,[,Ui]=ed,td=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Hi,isSupported:Fi,open:Wi,openError:Ui,openPromise:Ni},Symbol.toStringTag,{value:"Module"})),$e="locationManager",Xn="web_app_check_location",yo="web_app_open_location_settings",Je=Ce({available:!1,accessGranted:!1,accessRequested:!1});function er(e){return b(()=>Je()[e])}const zi=Q(Xn),Gi=er("available"),Qi=er("accessGranted"),Ji=er("accessRequested");function nd(e){let t=!1,n,r;return e.available&&(t=!0,n=e.access_requested,r=e.access_granted),{available:t,accessGranted:r||!1,accessRequested:n||!1}}const[rd,od,sd,Ki]=Fe($e,e=>{const t=G()&&z($e);return t?j.resolve(t):S("web_app_check_location","location_checked",e).then(nd)},e=>{Je.set(e),U($e,e)}),Zi=R($e,Xn),id=ce($e,Ki[0],Xn),Yi=Zi("mount",rd),[,Xi,ea]=od,[,ta]=sd,[ad,na]=Ki,[ud,cd,ld]=T(e=>S("web_app_request_location","location_requested",e).then(t=>{if(!t.available)throw Je.set({...Je(),available:!1}),new jn("Location data tracking is not available");const{available:n,...r}=t;return r}),"Location request is currently in progress"),ra=id("requestLocation",ud),[,tr,oa]=cd,[,sa]=ld,ia=Zi("openSettings",()=>{h(yo)},yo);function aa(){xe(tr),ad.set(!1)}const pd=Object.freeze(Object.defineProperty({__proto__:null,isAccessGranted:Qi,isAccessRequested:Ji,isAvailable:Gi,isMounted:na,isMounting:ea,isRequestingLocation:oa,isSupported:zi,mount:Yi,mountError:ta,mountPromise:Xi,openSettings:ia,requestLocation:ra,requestLocationError:sa,requestLocationPromise:tr,unmount:aa},Symbol.toStringTag,{value:"Module"}));function nr(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=r)}return t}function ua(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function dd(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function fd(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function D(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??fd(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??dd(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function J(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ua())}}}function ca(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function md(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var hd=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function la(e,t){return{kind:"validation",type:"check",reference:la,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&D(this,"input",n,r),n}}}function pa(e){return{kind:"validation",type:"integer",reference:pa,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&D(this,"integer",t,n),t}}}function ae(e){return{kind:"transformation",type:"transform",reference:ae,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function da(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function qe(e){return{kind:"schema",type:"boolean",reference:qe,expects:"boolean",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:D(this,"type",t,n),t}}}function fa(e){return{kind:"schema",type:"date",reference:fa,expects:"Date",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?D(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:D(this,"type",t,n),t}}}function ma(e,t){return{kind:"schema",type:"instance",reference:ma,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:D(this,"type",n,r),n}}}function rr(e){return{kind:"schema",type:"lazy",reference:rr,expects:"unknown",async:!1,getter:e,get"~standard"(){return J(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function He(e,t){return{kind:"schema",type:"loose_object",reference:He,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:da(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(D(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)ca(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else D(this,"type",n,r);return n}}}function dt(e){return{kind:"schema",type:"number",reference:dt,expects:"number",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:D(this,"type",t,n),t}}}function w(e,t){return{kind:"schema",type:"optional",reference:w,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return J(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=da(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function ha(e,t,n){return{kind:"schema",type:"record",reference:ha,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return J(this)},"~run"(r,o){var s,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const u in a)if(ca(a,u)){const c=a[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:a,key:u,value:c};for(const f of l.issues)f.path=[m],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:a,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else D(this,"type",r,o);return r}}}function g(e){return{kind:"schema",type:"string",reference:g,expects:"string",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:D(this,"type",t,n),t}}}function _o(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function or(e,t){return{kind:"schema",type:"union",reference:or,expects:md(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];D(this,"type",n,r,{issues:_o(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];D(this,"type",n,r,{issues:_o(i)})}return n}}}function ba(e,t,n){const r=e["~run"]({value:t},ua(n));if(r.issues)throw new hd(r.issues);return r.value}function ue(...e){return{...e[0],pipe:e,get"~standard"(){return J(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function bd(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function yd(e){return Object.entries(e).reduce((t,[n,r])=>(t[bd(n)]=r,t),{})}function un(e){const t=yd(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(un):un(r))}return t}function sr(e){return ae(t=>e?un(t):t)}function ya(e){return t=>ue(e,sr(t))}function _a(e){return(t,n)=>ba(ue(e,sr(n)),t)}function ga(){return ae(JSON.parse)}function ir(e){const t=ya(e);return n=>ue(g(),ga(),t(n))}function ar(e){return ae(t=>{const n={};return new URLSearchParams(t).forEach((r,o)=>{const s=n[o];Array.isArray(s)?s.push(r):s===void 0?n[o]=r:n[o]=[s,r]}),ba(e,n)})}function va(e){return t=>ue(or([g(),ma(URLSearchParams)]),ar(e),sr(t))}const go=w(rr(()=>Sd())),_d=He({id:dt(),photo_url:w(g()),type:g(),title:g(),username:w(g())}),gd=He({added_to_attachment_menu:w(qe()),allows_write_to_pm:w(qe()),first_name:g(),id:dt(),is_bot:w(qe()),is_premium:w(qe()),last_name:w(g()),language_code:w(g()),photo_url:w(g()),username:w(g())}),vd=He({auth_date:ue(g(),ae(e=>new Date(Number(e)*1e3)),fa()),can_send_after:w(ue(g(),ae(Number),pa())),chat:w(rr(()=>wd())),chat_type:w(g()),chat_instance:w(g()),hash:g(),query_id:w(g()),receiver:go,start_param:w(g()),signature:g(),user:go}),wd=ir(_d),Sd=ir(gd),wa=va(vd);function de(e){return/^#[\da-f]{6}$/i.test(e)}function Sa(e){return/^#[\da-f]{3}$/i.test(e)}function ka(e){const t=e.replace(/\s/g,"").toLowerCase();if(de(t))return t;if(Sa(t)){let r="#";for(let o=0;o<3;o+=1)r+=t[1+o].repeat(2);return r}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((r,o)=>r+parseInt(o,10).toString(16).padStart(2,"0"),"#")}const kd=ya(ha(g(),ue(or([g(),dt()]),ae(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),la(de)))),Lt=w(ue(g(),ae(e=>e==="1"))),vo=ir(kd()),Ed=He({tgWebAppBotInline:Lt,tgWebAppData:w(wa()),tgWebAppDefaultColors:w(vo()),tgWebAppFullscreen:Lt,tgWebAppPlatform:g(),tgWebAppShowSettings:Lt,tgWebAppStartParam:w(g()),tgWebAppThemeParams:vo(),tgWebAppVersion:g()}),Ad=va(Ed),Cd=_a(wa()),xd=_a(Ad());function ur(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,o])=>(Array.isArray(o)?n.push(...o.map(s=>[r,String(s)])):o!=null&&n.push([r,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":t(r,o)]),n),[])).toString()}function Ea(e){return ur(e)}function Pd(e){return ur(e,(t,n)=>t==="tgWebAppData"?Ea(n):JSON.stringify(n))}function cr(e){const t=ka(e);return Math.sqrt([.299,.587,.114].reduce((n,r,o)=>{const s=parseInt(t.slice(1+o*2,1+(o+1)*2),16);return n+s*s*r},0))<120}const[Dt,Aa]=y(!1),[we,Ca]=y({});function M(e){return b(()=>we()[e])}const xa=M("accent_text_color"),Ue=M("bg_color"),ft=M("button_color"),lr=M("button_text_color"),pr=M("bottom_bar_bg_color"),Pa=M("destructive_text_color"),Ba=M("header_bg_color"),ja=M("hint_color"),qa=b(()=>{const e=Ue();return!e||cr(e)}),Ma=M("link_color"),De=M("secondary_bg_color"),Ta=M("section_bg_color"),$a=M("section_header_text_color"),Ia=M("section_separator_color"),Oa=M("subtitle_text_color"),La=M("text_color");function he(e){return b(()=>mt()[e])}const Ie=Ce({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),mt=b(()=>{const e=Ie();return{...e,backgroundColor:e.backgroundColor||ft()||"#2481cc",textColor:e.textColor||lr()||"#ffffff"}}),[cn,dr]=y(!1),Da=he("backgroundColor"),Ra=he("hasShineEffect"),Va=he("isEnabled"),Fa=he("isLoaderVisible"),Wa=he("isVisible"),Na=he("text"),Ha=he("textColor"),Bd="web_app_setup_main_button",Ua="main_button_pressed",ht="mainButton",fr=le(ht),jd=ct(ht,dr),za=fr("mount",()=>{if(!cn()){const e=G()&&z(ht);e&&Ie.set(e),cn.set(!0)}}),Ga=fr("onClick",e=>C(Ua,e)),Qa=fr("offClick",e=>{q(Ua,e)}),Ja=jd("setParams",e=>{Ie.set({...Ie(),...nr(e)}),U(ht,Ie());const t=mt();t.text&&h(Bd,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})});function Ka(){cn.set(!1)}const qd=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Da,hasShineEffect:Ra,isEnabled:Va,isLoaderVisible:Fa,isMounted:dr,isVisible:Wa,mount:za,offClick:Qa,onClick:Ga,setParams:Ja,state:mt,text:Na,textColor:Ha,unmount:Ka},Symbol.toStringTag,{value:"Module"}));function mr(e,t){document.documentElement.style.setProperty(e,t)}function hr(e){document.documentElement.style.removeProperty(e)}const Re="themeParams",Za="theme_changed",Md=le(Re),Ya=({theme_params:e})=>{we.set(e),U(Re,e)},[Td,$d,Id,Xa]=Fe(Re,e=>{const t=G()&&z(Re);return t?j.resolve(t):S("web_app_request_theme","theme_changed",e).then(n=>n.theme_params)},e=>{C(Za,Ya),we.set(e)}),Od=ct(Re,Xa[0]),eu=Od("bindCssVars",e=>{if(Dt())throw new rt;e||(e=r=>`--tg-theme-${ep(r)}`);function t(r){Object.entries(we()).forEach(([o,s])=>{s&&r(o,s)})}function n(){t((r,o)=>{mr(e(r),o)})}return n(),we.sub(n),Dt.set(!0),()=>{t(hr),we.unsub(n),Dt.set(!1)}}),br=Md("mount",Td),[,yr,tu]=$d,[,nu]=Id,[Ld,ru]=Xa;function ou(){xe(yr),q(Za,Ya),Ld.set(!1)}function su(e){return b(()=>{const t=e();return de(t)?t:t==="bg_color"?Ue():De()})}const[Ke,iu]=y("bg_color"),bt=su(Ke),[Ze,au]=y("bottom_bar_bg_color"),yt=b(()=>{const e=Ze();return de(e)?e:e==="bottom_bar_bg_color"?pr()||De():e==="secondary_bg_color"?De():Ue()}),[Ye,uu]=y("bg_color"),_r=su(Ye),[Rt,cu]=y(!1),lu=b(()=>{const e=bt();return e?cr(e):!1}),[gr,pu]=y(!0),vr=b(()=>({backgroundColor:Ke(),bottomBarColor:Ze(),headerColor:Ye(),isActive:gr()})),ln="web_app_set_background_color",pn="web_app_set_bottom_bar_color",Ge="web_app_set_header_color",du="visibility_changed",ke="miniApp",wr={any:[ln,pn,Ge]},fu=b(()=>wr.any.some(e=>ie(e,re()))),mu=e=>{gr.set(e.is_visible),gt()},[Dd,Rd,Vd,hu]=Fe(ke,e=>br(e).then(()=>G()&&z(ke)||void 0),e=>{kr.ifAvailable(e?e.backgroundColor:"bg_color"),Er.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),Ar.ifAvailable(e?e.headerColor:"bg_color"),gr.set(e?e.isActive:!0),C(du,mu)}),bu=le(ke),Fd=R(ke,wr),_t=ce(ke,hu[0],wr),yu=_t("bindCssVars",e=>{if(Rt())throw new rt;const[t,n]=xn();function r(o,s){function i(){mr(o,s()||null)}i(),t(s.sub(i),hr.bind(null,o))}return e||(e=o=>`--tg-${ms(o)}`),r(e("bgColor"),bt),r(e("bottomBarColor"),yt),r(e("headerColor"),_r),t(()=>{Rt.set(!1)}),Rt.set(!0),n}),_u=bu("close",e=>{h("web_app_close",{return_back:e})}),gu=Fd("mount",Dd),[,Sr,vu]=Rd,[,wu]=Vd,[Wd,Su]=hu,ku=bu("ready",()=>{h("web_app_ready")});function gt(){U(ke,vr())}const kr=_t("setBackgroundColor",e=>{e!==Ke()&&(h(ln,{color:e}),Ke.set(e),gt())},ln),Er=_t("setBottomBarColor",e=>{e!==Ze()&&(h(pn,{color:e}),Ze.set(e),gt())},pn),Ar=_t("setHeaderColor",e=>{e!==Ye()&&(h(Ge,de(e)?{color:e}:{color_key:e}),Ye.set(e),gt())},Ge,{rgb:[Ge,"color",de]});function Eu(){xe(Sr),q(du,mu),Wd.set(!1)}const Nd=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:iu,backgroundColorRGB:bt,bindCssVars:yu,bottomBarColor:au,bottomBarColorRGB:yt,close:_u,headerColor:uu,headerColorRGB:_r,isActive:pu,isCssVarsBound:cu,isDark:lu,isMounted:Su,isMounting:vu,isSupported:fu,mount:gu,mountError:wu,mountPromise:Sr,ready:ku,setBackgroundColor:kr,setBottomBarColor:Er,setHeaderColor:Ar,state:vr,unmount:Eu},Symbol.toStringTag,{value:"Module"}));function Hd(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];if(n.length>64)throw new H(`Invalid title: ${n}`);if(!t||t.length>256)throw new H(`Invalid message: ${t}`);if(r.length>3)throw new H(`Invalid buttons count: ${r.length}`);return{title:n,message:t,buttons:r.length?r.map((o,s)=>{const i=o.id||"";if(i.length>64)throw new H(`Button with index ${s} has invalid id: ${i}`);if(!o.type||o.type==="default"||o.type==="destructive"){const a=o.text.trim();if(!a||a.length>64)throw new H(`Button with index ${s} has invalid text: ${a}`);return{type:o.type,text:a,id:i}}return{type:o.type,id:i}}):[{type:"close",id:""}]}}const Cr="web_app_open_popup",Ud=R("popup",Cr),Au=Q(Cr),[zd,Gd,Qd]=T(e=>S(Cr,"popup_closed",{...e,params:Hd(e)}).then(({button_id:t})=>t===void 0?null:t),"A popup is already opened"),Cu=Ud("open",zd),[,xu,Pu]=Gd,[,Bu]=Qd,Jd=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Pu,isSupported:Au,open:Cu,openError:Bu,openPromise:xu},Symbol.toStringTag,{value:"Module"})),ju="web_app_close_scan_qr_popup",xr="web_app_open_scan_qr_popup",Kd="scan_qr_popup_closed",Zd="qr_text_received",qu=R("qrScanner",xr),Mu=qu("close",()=>{h(ju),xe(Pr)}),Tu=Q(xr);function Yd(e){e||(e={});const{onCaptured:t,text:n,capture:r}=e,[,o]=xn(C(Kd,()=>{s.resolve()}),C(Zd,i=>{t?t(i.data):(!r||r(i.data))&&(s.resolve(i.data),h(ju))})),s=new xp(e);return(e.postEvent||h)(xr,{text:n}),j.resolve(s).catch(In).finally(o)}const[Xd,ef,tf]=T(Yd,"The QR Scanner is already opened"),$u=qu("open",Xd),[,Pr,Iu]=ef,[,Ou]=tf,nf=Object.freeze(Object.defineProperty({__proto__:null,close:Mu,isOpened:Iu,isSupported:Tu,open:$u,openError:Ou,openPromise:Pr},Symbol.toStringTag,{value:"Module"}));function pe(e){return b(()=>vt()[e])}const Oe=Ce({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),vt=b(()=>{const e=Oe();return{...e,backgroundColor:e.backgroundColor||yt()||"#000000",textColor:e.textColor||ft()||"#2481cc"}}),[dn,Br]=y(!1),Lu=pe("backgroundColor"),Du=pe("hasShineEffect"),Ru=pe("isEnabled"),Vu=pe("isLoaderVisible"),Fu=pe("isVisible"),Wu=pe("position"),Nu=pe("text"),Hu=pe("textColor"),wt="web_app_setup_secondary_button",Uu="secondary_button_pressed",St="secondaryButton",jr=R(St,wt),rf=ce(St,Br,wt),zu=Q(wt),Gu=jr("mount",()=>{if(!dn()){const e=G()&&z(St);e&&Oe.set(e),dn.set(!0)}}),Qu=jr("onClick",e=>C(Uu,e)),Ju=jr("offClick",e=>{q(Uu,e)}),Ku=rf("setParams",e=>{Oe.set({...Oe(),...nr(e)}),U(St,Oe());const t=vt();t.text&&h(wt,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})});function Zu(){dn.set(!1)}const of=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Lu,hasShineEffect:Du,isEnabled:Ru,isLoaderVisible:Vu,isMounted:Br,isSupported:zu,isVisible:Fu,mount:Gu,offClick:Ju,onClick:Qu,position:Wu,setParams:Ku,state:vt,text:Nu,textColor:Hu,unmount:Zu},Symbol.toStringTag,{value:"Module"})),kt="web_app_setup_settings_button",Yu="settings_button_pressed",Et="settingsButton",[wo,Xu]=y(!1),[Xe,ec]=y(!1),tc=Q(kt),qr=R(Et,kt),nc=ce(Et,Xe,kt),rc=nc("hide",()=>{Mr(!1)}),oc=qr("mount",()=>{Xe()||(Mr(G()&&z(Et)||!1),Xe.set(!0))});function Mr(e){e!==wo()&&(h(kt,{is_visible:e}),U(Et,e),wo.set(e))}const sc=qr("onClick",e=>C(Yu,e)),ic=qr("offClick",e=>{q(Yu,e)}),ac=nc("show",()=>{Mr(!0)});function uc(){Xe.set(!1)}const sf=Object.freeze(Object.defineProperty({__proto__:null,hide:rc,isMounted:ec,isSupported:tc,isVisible:Xu,mount:oc,offClick:ic,onClick:sc,show:ac,unmount:uc},Symbol.toStringTag,{value:"Module"})),At="web_app_setup_swipe_behavior",Ct="swipeBehavior",[Ve,cc]=y(!1),lc=Q(At),[fn,pc]=y(!0),af=R(Ct,At),dc=ce(Ct,Ve,At),fc=dc("disableVertical",()=>{Tr(!1)}),mc=dc("enableVertical",()=>{Tr(!0)}),hc=af("mount",()=>{Ve()||(Tr(G()&&z(Ct)||!1,!0),Ve.set(!0))});function Tr(e,t){(e!==fn()||t)&&(h(At,{allow_vertical_swipe:e}),U(Ct,e),fn.set(e))}function bc(){Ve.set(!1)}const uf=Object.freeze(Object.defineProperty({__proto__:null,_isMounted:Ve,_isVerticalEnabled:fn,disableVertical:fc,enableVertical:mc,isMounted:cc,isSupported:lc,isVerticalEnabled:pc,mount:hc,unmount:bc},Symbol.toStringTag,{value:"Module"})),cf=Object.freeze(Object.defineProperty({__proto__:null,accentTextColor:xa,backgroundColor:Ue,bindCssVars:eu,bottomBarBgColor:pr,buttonColor:ft,buttonTextColor:lr,destructiveTextColor:Pa,headerBackgroundColor:Ba,hintColor:ja,isCssVarsBound:Aa,isDark:qa,isMounted:ru,isMounting:tu,linkColor:Ma,mount:br,mountError:nu,mountPromise:yr,secondaryBackgroundColor:De,sectionBackgroundColor:Ta,sectionHeaderTextColor:$a,sectionSeparatorColor:Ia,state:Ca,subtitleTextColor:Oa,textColor:La,unmount:ou},Symbol.toStringTag,{value:"Module"})),be="viewport",$r="fullscreen_changed",Ir="safe_area_changed",Or="content_safe_area_changed",Lr="viewport_changed",yc=le(be),So={left:0,top:0,bottom:0,right:0};function Vt(e){return Math.max(e,0)}const[Ft,Dr]=y({contentSafeAreaInsets:So,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:So,stableHeight:0,width:0});function ye(e){return b(()=>Dr()[e])}const xt=ye("height"),Pt=ye("stableHeight"),Rr=ye("width"),_c=ye("isExpanded"),gc=b(()=>xt()===Pt());function Pe(e){const{height:t,stableHeight:n,width:r}=e;Ft.set({...Ft(),...nr({...e,height:t?Vt(t):void 0,width:r?Vt(r):void 0,stableHeight:n?Vt(n):void 0})}),U(be,Ft())}function lf(){return z(be)}function Bt(e){return b(()=>jt()[e])}const jt=ye("contentSafeAreaInsets"),Vr=Bt("bottom"),Fr=Bt("left"),Wr=Bt("right"),Nr=Bt("top");function qt(e){return b(()=>Mt()[e])}const Mt=ye("safeAreaInsets"),Hr=qt("bottom"),Ur=qt("left"),zr=qt("right"),Gr=qt("top"),vc="web_app_request_safe_area",wc=R(be,vc),mn=wc("requestContentSafeAreaInsets",e=>S("web_app_request_content_safe_area",Or,e));function Sc(e){return S("web_app_request_viewport",Lr,e)}const hn=wc("requestSafeAreaInsets",e=>S(vc,Ir,e)),kc=e=>{const{height:t}=e;Pe({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},Ec=e=>{Pe({isFullscreen:e.is_fullscreen})},Ac=e=>{Pe({safeAreaInsets:e})},Cc=e=>{Pe({contentSafeAreaInsets:e})},[pf,df,ff,mf]=Fe(be,e=>{const t=G()&&lf();return t?j.resolve(t):j.fn(async n=>{const r=await j.all([hn.isAvailable()?hn(n):Mt(),mn.isAvailable()?mn(n):jt()]),o=Pn(),s={contentSafeAreaInsets:r[1],isFullscreen:!!o.tgWebAppFullscreen,safeAreaInsets:r[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(o.tgWebAppPlatform)){const i=window;return{...s,height:i.innerHeight,isExpanded:!0,stableHeight:i.innerHeight,width:i.innerWidth}}return Sc(n).then(i=>({...s,height:i.height,isExpanded:i.is_expanded,stableHeight:i.is_state_stable?i.height:0,width:i.width}))},e)},e=>{C(Lr,kc),C($r,Ec),C(Ir,Ac),C(Or,Cc),Pe(e)}),xc=yc("mount",pf),[,Qr,Pc]=df,[,Bc]=ff,[Jr,jc]=mf;function qc(){xe(Qr),q(Lr,kc),q($r,Ec),q(Ir,Ac),q(Or,Cc),Jr.set(!1)}const hf=ct(be,Jr),[Wt,Mc]=y(!1),Tc=hf("bindCssVars",e=>{if(Wt())throw new rt;e||(e=n=>`--tg-viewport-${ms(n)}`);const t=[["height",xt],["stableHeight",Pt],["width",Rr],["safeAreaInsetTop",Gr],["safeAreaInsetBottom",Hr],["safeAreaInsetLeft",Ur],["safeAreaInsetRight",zr],["contentSafeAreaInsetTop",Nr],["contentSafeAreaInsetBottom",Vr],["contentSafeAreaInsetLeft",Fr],["contentSafeAreaInsetRight",Wr]].reduce((n,[r,o])=>{const s=e(r);if(s){const i=()=>{mr(s,`${o()}px`)};n.push([i,o.sub(i),s])}return n},[]);return t.forEach(n=>{n[0]()}),Wt.set(!0),()=>{t.forEach(n=>{n[1](),hr(n[2])}),Wt.set(!1)}}),$c=yc("expand",()=>{h("web_app_expand")}),Ic="web_app_request_fullscreen",bf=ce(be,Jr,Ic),Kr=ye("isFullscreen"),[yf,Oc]=y(),[_f,Lc]=y();function Dc(e,t){return bf(e,T(n=>S(t?Ic:"web_app_exit_fullscreen",[$r,"fullscreen_failed"],n).then(r=>{if("error"in r&&r.error!=="ALREADY_FULLSCREEN")throw new Ss(r.error);const o="is_fullscreen"in r?r.is_fullscreen:!0;o!==Kr()&&Pe({isFullscreen:o})}),"Fullscreen mode change is already being requested",{promise:yf,error:_f})[0])}const Rc=Dc("requestFullscreen",!0),Vc=Dc("exitFullscreen"),gf=Object.freeze(Object.defineProperty({__proto__:null,bindCssVars:Tc,changeFullscreenError:Lc,changeFullscreenPromise:Oc,contentSafeAreaInsetBottom:Vr,contentSafeAreaInsetLeft:Fr,contentSafeAreaInsetRight:Wr,contentSafeAreaInsetTop:Nr,contentSafeAreaInsets:jt,exitFullscreen:Vc,expand:$c,height:xt,isCssVarsBound:Mc,isExpanded:_c,isFullscreen:Kr,isMounted:jc,isMounting:Pc,isStable:gc,mount:xc,mountError:Bc,mountPromise:Qr,requestFullscreen:Rc,safeAreaInsetBottom:Hr,safeAreaInsetLeft:Ur,safeAreaInsetRight:zr,safeAreaInsetTop:Gr,safeAreaInsets:Mt,stableHeight:Pt,state:Dr,unmount:qc,width:Rr},Symbol.toStringTag,{value:"Module"})),Fc="web_app_request_emoji_status_access",[vf,wf,Sf]=T(e=>S(Fc,"emoji_status_access_requested",e).then(t=>t.status),"Emoji status access request is already in progress"),kf=A("requestEmojiStatusAccess",vf,{isSupported:Fc}),[,Ef,Af]=wf,[,Cf]=Sf,Wc="web_app_set_emoji_status",[xf,Pf,Bf]=T((e,t)=>S(Wc,["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(n=>{if(n&&"error"in n)throw new ws(n.error)}),"Emoji status set request is currently in progress"),jf=A("setEmojiStatus",xf,{isSupported:Wc}),[,qf,Mf]=Pf,[,Tf]=Bf,$f={isSupported:"web_app_add_to_home_screen"},Nc="home_screen_failed",If=A("onAddToHomeScreenFailed",(e,t)=>C(Nc,e,t),{isSupported:"web_app_add_to_home_screen"}),Of=A("offAddToHomeScreenFailed",e=>{q(Nc,e)},$f),Hc={isSupported:"web_app_add_to_home_screen"},Uc="home_screen_added",Lf=A("onAddedToHomeScreen",(e,t)=>C(Uc,e,t),Hc),Df=A("offAddedToHomeScreen",e=>{q(Uc,e)},Hc),ko="web_app_add_to_home_screen",Rf=A("addToHomeScreen",()=>{h(ko)},{isSupported:ko}),zc="web_app_check_home_screen",[Vf,Ff,Wf]=T(e=>S(zc,"home_screen_checked",e).then(t=>t.status||"unknown"),"Check home screen status request is currently in progress"),Nf=A("checkHomeScreenStatus",Vf,{isSupported:zc}),[,Hf,Uf]=Ff,[,zf]=Wf,Gf=le(),Qf=Gf("openLink",(e,t)=>{if(typeof e=="string")try{e=new URL(e)}catch(n){throw new H(`"${e.toString()}" is invalid URL`,n)}t||(t={}),h("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}),Eo="web_app_open_tg_link",Jf=le(),Gc=Jf("openTelegramLink",e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new H(`"${t}" is invalid URL`);if(!ie(Eo,re())){window.location.href=t;return}e=new URL(e),h(Eo,{path_full:e.pathname+e.search})}),Kf=le(),Zf=Kf("shareURL",(e,t)=>{Gc("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});function Yf(e,t){return new j({abortSignal:t,timeout:e}).catch(()=>{})}const Qc="web_app_request_phone",[Xf,em,tm]=T(e=>S(Qc,"phone_requested",e).then(t=>t.status),"Phone access request is currently in progress"),Jc=A("requestPhoneAccess",Xf,{isSupported:Qc}),[,nm,rm]=em,[,om]=tm;async function Ao(e){const t=await fe("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3});return pt(Te(gi([W(),bi(URLSearchParams)]),ar(an({contact:Te(W(),ga(),an({user_id:zn(),phone_number:W(),first_name:W(),last_name:yi(W())})),auth_date:Te(W(),Hn(n=>new Date(Number(n)*1e3)),Un()),hash:W()}))),t)}const[sm,im,am]=T(e=>new j(async(t,n,r)=>{try{return t(await Ao(r))}catch(s){if(s instanceof sn)throw s}if(await Jc(r)!=="sent")throw new qn("User denied access");let o=50;for(;!r.isAborted();){try{return t(await Ao(r))}catch(s){if(s instanceof sn)throw s}await Yf(o),o+=50}},e),"Contact is already being requested"),um=A("requestContact",sm,{isSupported:"web_app_request_phone"}),[,cm,lm]=im,[,pm]=am,Kc="web_app_request_write_access",[dm,fm,mm]=T(e=>S(Kc,"write_access_requested",e).then(t=>t.status),"Write access request is currently in progress"),hm=A("requestWriteAccess",dm,{isSupported:Kc}),[,bm,ym]=fm,[,_m]=mm;function gm(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}async function vm(e){try{const{clipboard:t}=navigator;if(t)return await t.writeText(e)}catch{}gm(e)}const Co="web_app_request_file_download",wm=A("downloadFile",(e,t,n)=>S(Co,"file_download_requested",{...n,params:{url:e,file_name:t}}).then(r=>{if(r.status!=="downloading")throw new qn("User denied the action")}),{isSupported:Co}),Sm=A("getCurrentTime",e=>fe("getCurrentTime",{},e).then(t=>pt(Te(zn(),fi(),Hn(n=>new Date(n*1e3)),Un()),t)),{isSupported:"web_app_invoke_custom_method"}),xo="web_app_read_text_from_clipboard",km=A("readTextFromClipboard",e=>{const t=Bn();return S(xo,"clipboard_text_received",{...e,params:{req_id:t},capture:ds(t)}).then(({data:n=null})=>n)},{isSupported:xo}),Em=A("sendData",e=>{const{size:t}=new Blob([e]);if(!t||t>4096)throw new H(t?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data");h("web_app_data_send",{data:e})},{isSupported(){return Pn().tgWebAppBotInline?void 0:"The application must be launched in the inline mode"}}),Po="web_app_send_prepared_message",Am=A("shareMessage",(e,t)=>S(Po,["prepared_message_failed","prepared_message_sent"],{...t,params:{id:e}}).then(n=>{if(n&&"error"in n)throw new ks(n.error)}),{isSupported:Po}),Bo="web_app_share_to_story",Cm=A("shareStory",(e,t)=>{t||(t={}),h(Bo,{text:t.text,media_url:e,widget_link:t.widgetLink})},{isSupported:Bo}),xm="web_app_switch_inline_query",Pm=A("switchInlineQuery",(e,t)=>{h(xm,{query:e,chat_types:t||[]})});function Bm(e){try{return[!0,e()]}catch(t){return[!1,t]}}function jm(e){gs(e);const[t,n]=xn(C("reload_iframe",()=>{Xt(!1,"Received a request to reload the page"),h("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:r=!0}=e||{};if(r){const o=document.createElement("style");o.id="telegram-custom-styles",document.head.appendChild(o),t(C("set_custom_style",s=>{o.innerHTML=s}),()=>{document.head.removeChild(o)})}return h("iframe_ready",{reload_supported:!0}),Xt(!1,"The package was initialized"),n}exports.AccessDeniedError=qn;exports.CSSVarsBoundError=rt;exports.ConcurrentCallError=vs;exports.FullscreenFailedError=Ss;exports.FunctionUnavailableError=ge;exports.InvalidArgumentsError=H;exports.InvalidEnvError=lp;exports.InvalidLaunchParamsError=as;exports.InvokeCustomMethodError=cs;exports.LaunchParamsRetrieveError=is;exports.MethodParameterUnsupportedError=ss;exports.MethodUnsupportedError=os;exports.NotAvailableError=jn;exports.SetEmojiStatusError=ws;exports.ShareMessageError=ks;exports.UnknownEnvError=us;exports.addToHomeScreen=Rf;exports.authenticateBiometry=Js;exports.backButton=gp;exports.bindMiniAppCssVars=yu;exports.bindThemeParamsCssVars=eu;exports.bindViewportCssVars=Tc;exports.biometry=Dp;exports.biometryAuthError=Zs;exports.biometryAuthPromise=Vn;exports.biometryMountError=Gs;exports.biometryState=Ls;exports.changeFullscreenError=Lc;exports.changeFullscreenPromise=Oc;exports.checkHomeScreenStatus=Nf;exports.checkHomeScreenStatusError=zf;exports.checkHomeScreenStatusPromise=Hf;exports.closeMiniApp=_u;exports.closeQrScanner=Mu;exports.closingBehavior=Vp;exports.cloudStorage=zp;exports.configure=gs;exports.copyTextToClipboard=vm;exports.createPostEvent=fs;exports.createRequestId=Bn;exports.deleteCloudStorageItem=Gn;exports.disableClosingConfirmation=ii;exports.disableVerticalSwipes=fc;exports.downloadFile=wm;exports.emitEvent=Kt;exports.enableClosingConfirmation=ai;exports.enableVerticalSwipes=mc;exports.exitFullscreen=Vc;exports.expandViewport=$c;exports.getCloudStorageItem=Si;exports.getCloudStorageKeys=Qn;exports.getCurrentTime=Sm;exports.hapticFeedback=Gp;exports.hapticFeedbackImpactOccurred=Ai;exports.hapticFeedbackNotificationOccurred=Ci;exports.hapticFeedbackSelectionChanged=xi;exports.hideBackButton=Bs;exports.hideSettingsButton=rc;exports.ignoreCanceled=In;exports.init=jm;exports.initData=Jp;exports.initDataAuthDate=Kn;exports.initDataCanSendAfter=Zn;exports.initDataCanSendAfterDate=ji;exports.initDataChat=qi;exports.initDataChatInstance=Ti;exports.initDataChatType=Mi;exports.initDataHash=$i;exports.initDataQueryId=Ii;exports.initDataRaw=Oi;exports.initDataReceiver=Li;exports.initDataStartParam=Ri;exports.initDataState=Bi;exports.initDataUser=Vi;exports.invoice=td;exports.invokeCustomMethod=fe;exports.isAccessDeniedError=bp;exports.isAuthenticatingBiometry=Ks;exports.isBackButtonMounted=Cs;exports.isBackButtonSupported=xs;exports.isBackButtonVisible=As;exports.isBiometryAvailable=Ds;exports.isBiometryMounted=Qs;exports.isBiometryMounting=zs;exports.isBiometrySupported=Ws;exports.isCSSVarsBoundError=up;exports.isCheckingHomeScreenStatus=Uf;exports.isClosingBehaviorMounted=Wn;exports.isClosingConfirmationEnabled=oi;exports.isCloudStorageSupported=wi;exports.isColorDark=cr;exports.isConcurrentCallError=mp;exports.isFullscreen=Kr;exports.isFullscreenFailedError=yp;exports.isFunctionNotAvailableError=dp;exports.isHapticFeedbackSupported=Ei;exports.isInvalidArguments=fp;exports.isInvalidEnvError=pp;exports.isInvalidLaunchParamsError=Ul;exports.isInvoiceOpened=Hi;exports.isInvoiceSupported=Fi;exports.isInvokeCustomMethodError=Gl;exports.isLaunchParamsRetrieveError=Hl;exports.isLocationManagerAccessGranted=Qi;exports.isLocationManagerAccessRequested=Ji;exports.isLocationManagerAvailable=Gi;exports.isLocationManagerMounted=na;exports.isLocationManagerMounting=ea;exports.isLocationManagerSupported=zi;exports.isMainButtonEnabled=Va;exports.isMainButtonLoaderVisible=Fa;exports.isMainButtonMounted=dr;exports.isMainButtonVisible=Wa;exports.isMethodMethodParameterUnsupportedError=Wl;exports.isMethodUnsupportedError=Fl;exports.isMiniAppActive=pu;exports.isMiniAppCssVarsBound=cu;exports.isMiniAppDark=lu;exports.isMiniAppMounted=Su;exports.isMiniAppMounting=vu;exports.isMiniAppSupported=fu;exports.isNotAvailableError=cp;exports.isPopupOpened=Pu;exports.isPopupSupported=Au;exports.isQrScannerOpened=Iu;exports.isQrScannerSupported=Tu;exports.isRGB=de;exports.isRGBShort=Sa;exports.isRequestingBiometryAccess=ei;exports.isRequestingContact=lm;exports.isRequestingEmojiStatusAccess=Af;exports.isRequestingLocation=oa;exports.isRequestingPhoneAccess=rm;exports.isRequestingWriteAccess=ym;exports.isSSR=en;exports.isSecondaryButtonEnabled=Ru;exports.isSecondaryButtonLoaderVisible=Vu;exports.isSecondaryButtonMounted=Br;exports.isSecondaryButtonSupported=zu;exports.isSecondaryButtonVisible=Fu;exports.isSetEmojiStatusError=hp;exports.isSettingEmojiStatus=Mf;exports.isSettingsButtonMounted=ec;exports.isSettingsButtonSupported=tc;exports.isSettingsButtonVisible=Xu;exports.isShareMessageError=_p;exports.isSwipeBehaviorMounted=cc;exports.isSwipeBehaviorSupported=lc;exports.isTMA=Zt;exports.isThemeParamsCssVarsBound=Aa;exports.isThemeParamsDark=qa;exports.isThemeParamsMounted=ru;exports.isThemeParamsMounting=tu;exports.isUnknownEnvError=zl;exports.isVerticalSwipesEnabled=pc;exports.isViewportCssVarsBound=Mc;exports.isViewportExpanded=_c;exports.isViewportMounted=jc;exports.isViewportMounting=Pc;exports.isViewportStable=gc;exports.locationManager=pd;exports.locationManagerMountError=ta;exports.locationManagerMountPromise=Xi;exports.mainButton=qd;exports.mainButtonBackgroundColor=Da;exports.mainButtonHasShineEffect=Ra;exports.mainButtonState=mt;exports.mainButtonText=Na;exports.mainButtonTextColor=Ha;exports.miniApp=Nd;exports.miniAppBackgroundColor=iu;exports.miniAppBackgroundColorRGB=bt;exports.miniAppBottomBarColor=au;exports.miniAppBottomBarColorRGB=yt;exports.miniAppHeaderColor=uu;exports.miniAppHeaderColorRGB=_r;exports.miniAppMountError=wu;exports.miniAppMountPromise=Sr;exports.miniAppReady=ku;exports.miniAppState=vr;exports.mockTelegramEnv=Zl;exports.mountBackButton=js;exports.mountBiometry=Us;exports.mountBiometryPromise=Rn;exports.mountClosingBehavior=ui;exports.mountLocationManager=Yi;exports.mountMainButton=za;exports.mountMiniApp=gu;exports.mountSecondaryButton=Gu;exports.mountSettingsButton=oc;exports.mountSwipeBehavior=hc;exports.mountThemeParams=br;exports.mountViewport=xc;exports.off=q;exports.offAddToHomeScreenFailed=Of;exports.offAddedToHomeScreen=Df;exports.offBackButtonClick=Ms;exports.offMainButtonClick=Qa;exports.offSecondaryButtonClick=Ju;exports.offSettingsButtonClick=ic;exports.on=C;exports.onAddToHomeScreenFailed=If;exports.onAddedToHomeScreen=Lf;exports.onBackButtonClick=qs;exports.onMainButtonClick=Ga;exports.onSecondaryButtonClick=Qu;exports.onSettingsButtonClick=sc;exports.openBiometrySettings=Ys;exports.openInvoice=Wi;exports.openInvoiceError=Ui;exports.openInvoicePromise=Ni;exports.openLink=Qf;exports.openLocationManagerSettings=ia;exports.openPopup=Cu;exports.openPopupError=Bu;exports.openPopupPromise=xu;exports.openQrScanner=$u;exports.openQrScannerError=Ou;exports.openQrScannerPromise=Pr;exports.openTelegramLink=Gc;exports.parseInitDataQuery=Cd;exports.parseLaunchParamsQuery=xd;exports.popup=Jd;exports.postEvent=h;exports.qrScanner=nf;exports.readTextFromClipboard=km;exports.request=S;exports.requestBiometry=Rs;exports.requestBiometryAccess=Xs;exports.requestBiometryAccessError=ti;exports.requestBiometryAccessPromise=Fn;exports.requestContact=um;exports.requestContactError=pm;exports.requestContactPromise=cm;exports.requestContentSafeAreaInsets=mn;exports.requestEmojiStatusAccess=kf;exports.requestEmojiStatusAccessError=Cf;exports.requestEmojiStatusAccessPromise=Ef;exports.requestFullscreen=Rc;exports.requestLocation=ra;exports.requestLocationError=sa;exports.requestLocationPromise=tr;exports.requestPhoneAccess=Jc;exports.requestPhoneAccessError=om;exports.requestPhoneAccessPromise=nm;exports.requestSafeAreaInsets=hn;exports.requestViewport=Sc;exports.requestWriteAccess=hm;exports.requestWriteAccessError=_m;exports.requestWriteAccessPromise=bm;exports.restoreInitData=Di;exports.retrieveLaunchParams=nt;exports.retrieveRawInitData=ps;exports.retrieveRawLaunchParams=Cn;exports.safeCall=Bm;exports.secondaryButton=of;exports.secondaryButtonBackgroundColor=Lu;exports.secondaryButtonHasShineEffect=Du;exports.secondaryButtonPosition=Wu;exports.secondaryButtonState=vt;exports.secondaryButtonText=Nu;exports.secondaryButtonTextColor=Hu;exports.sendData=Em;exports.serializeInitDataQuery=Ea;exports.serializeLaunchParamsQuery=Pd;exports.serializeToQuery=ur;exports.setCloudStorageItem=ki;exports.setDebug=ip;exports.setEmojiStatus=jf;exports.setEmojiStatusError=Tf;exports.setEmojiStatusPromise=qf;exports.setMainButtonParams=Ja;exports.setMiniAppBackgroundColor=kr;exports.setMiniAppBottomBarColor=Er;exports.setMiniAppHeaderColor=Ar;exports.setSecondaryButtonParams=Ku;exports.settingsButton=sf;exports.shareMessage=Am;exports.shareStory=Cm;exports.shareURL=Zf;exports.showBackButton=Ts;exports.showSettingsButton=ac;exports.supports=ie;exports.swipeBehavior=uf;exports.switchInlineQuery=Pm;exports.targetOrigin=ls;exports.themeParams=cf;exports.themeParamsAccentTextColor=xa;exports.themeParamsBackgroundColor=Ue;exports.themeParamsBottomBarBgColor=pr;exports.themeParamsButtonColor=ft;exports.themeParamsButtonTextColor=lr;exports.themeParamsDestructiveTextColor=Pa;exports.themeParamsHeaderBackgroundColor=Ba;exports.themeParamsHintColor=ja;exports.themeParamsLinkColor=Ma;exports.themeParamsMountError=nu;exports.themeParamsMountPromise=yr;exports.themeParamsSecondaryBackgroundColor=De;exports.themeParamsSectionBackgroundColor=Ta;exports.themeParamsSectionHeaderTextColor=$a;exports.themeParamsSectionSeparatorColor=Ia;exports.themeParamsState=Ca;exports.themeParamsSubtitleTextColor=Oa;exports.themeParamsTextColor=La;exports.toRGB=ka;exports.transformQueryUsing=ar;exports.unmountBackButton=$s;exports.unmountBiometry=ni;exports.unmountClosingBehavior=ci;exports.unmountLocationManager=aa;exports.unmountMainButton=Ka;exports.unmountMiniApp=Eu;exports.unmountSecondaryButton=Zu;exports.unmountSettingsButton=uc;exports.unmountSwipeBehavior=bc;exports.unmountThemeParams=ou;exports.unmountViewport=qc;exports.updateBiometryToken=ri;exports.useSignal=Yc;exports.viewport=gf;exports.viewportContentSafeAreaInsetBottom=Vr;exports.viewportContentSafeAreaInsetLeft=Fr;exports.viewportContentSafeAreaInsetRight=Wr;exports.viewportContentSafeAreaInsetTop=Nr;exports.viewportContentSafeAreaInsets=jt;exports.viewportHeight=xt;exports.viewportMountError=Bc;exports.viewportMountPromise=Qr;exports.viewportSafeAreaInsetBottom=Hr;exports.viewportSafeAreaInsetLeft=Ur;exports.viewportSafeAreaInsetRight=zr;exports.viewportSafeAreaInsetTop=Gr;exports.viewportSafeAreaInsets=Mt;exports.viewportStableHeight=Pt;exports.viewportState=Dr;exports.viewportWidth=Rr;exports.wrapSafe=A;
//# sourceMappingURL=index.cjs.map
