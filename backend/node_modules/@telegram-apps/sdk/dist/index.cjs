"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function qo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function tl(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function nl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function Se(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??nl(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??tl(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function K(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},qo())}}}function rl(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var ol=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function vn(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function tt(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Io(){return{kind:"schema",type:"any",reference:Io,expects:"any",async:!1,get"~standard"(){return K(this)},"~run"(e){return e.typed=!0,e}}}function Gt(e){return{kind:"schema",type:"boolean",reference:Gt,expects:"boolean",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:Se(this,"type",t,n),t}}}function En(e){return{kind:"schema",type:"function",reference:En,expects:"Function",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:Se(this,"type",t,n),t}}}function F(e,t){return{kind:"schema",type:"loose_object",reference:F,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return K(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:vn(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(Se(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)rl(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else Se(this,"type",n,r);return n}}}function xe(e,t){return{kind:"schema",type:"nullish",reference:xe,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return K(this)},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=vn(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Qt(e){return{kind:"schema",type:"number",reference:Qt,expects:"number",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Se(this,"type",t,n),t}}}function Jt(e,t){return{kind:"schema",type:"optional",reference:Jt,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return K(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=vn(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function re(e){return{kind:"schema",type:"string",reference:re,expects:"string",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:Se(this,"type",t,n),t}}}function jo(){return{kind:"schema",type:"unknown",reference:jo,expects:"unknown",async:!1,get"~standard"(){return K(this)},"~run"(e){return e.typed=!0,e}}}function Kt(e,t,n){const r=e["~run"]({value:t},qo(n));if(r.issues)throw new ol(r.issues);return r.value}function Do(...e){return{...e[0],pipe:e,get"~standard"(){return K(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function No(e){return tt(F({TelegramWebviewProxy:F({postEvent:En()})}),e)}function Vo(){try{return window.self!==window.top}catch{return!0}}var sl=Object.defineProperty,il=(e,t,n)=>t in e?sl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,to=(e,t,n)=>il(e,typeof t!="symbol"?t+"":t,n);function al(e){return t=>t instanceof e}function Lo(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,al(n)]}const[ul,Im]=Lo("CancelledError","Promise was canceled"),[cl,jm]=Lo("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),Ro=Symbol("Resolved");function no(e){return Array.isArray(e)&&e[0]===Ro}function ll(e){return[Ro,e]}function ro(e,t){return e.reject=t.reject,e.abort=t.abort,e}let Ho=class Yt extends Promise{constructor(t,n){let r,o;super((s,i)=>{let a,u;typeof t=="function"?(a=t,u=n):u=t;const c=[],l=d=>(...I)=>{const ee=d(...I);return c.forEach(qt=>qt()),ee},p=new AbortController,{signal:m}=p;o=d=>{!m.aborted&&p.abort(d)};const f=()=>m.reason,k=d=>{const I=()=>{d(f())};m.addEventListener("abort",I,!0);const ee=()=>{m.removeEventListener("abort",I,!0)};return c.push(ee),ee},ge=l(d=>{s(d),o(ll(d))});r=l(d=>{i(d),o(d)}),u||(u={});const{abortSignal:M,rejectOnAbort:ne=!0}=u;if(M)if(M.aborted){const{reason:d}=M;if(ne)return r(d);o(d)}else{const d=()=>{o(M.reason)};M.addEventListener("abort",d),c.push(()=>{M.removeEventListener("abort",d)})}ne&&k(i);const{timeout:S}=u;if(S){const d=setTimeout(()=>{o(new cl(S))},S);c.push(()=>{clearTimeout(d)})}const $=()=>m.aborted,q=()=>no(f()),L=()=>{const d=f();return no(d)?d[1]:void 0};try{const d=a&&a(ge,r,{abortReason:f,abortSignal:m,isAborted:$,isResolved:q,onAborted:k,onResolved:I=>k(()=>{q()&&I(L())}),resolved:L,throwIfAborted(){if($())throw f()}});d instanceof Promise&&d.catch(r)}catch(d){r(d)}}),to(this,"abort"),to(this,"reject"),this.abort=o,this.reject=r}static fn(t,n){return new Yt(async(r,o,s)=>{try{r(await t(s))}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new Yt((n,r)=>{r(t)})}cancel(){this.abort(new ul)}catch(t){return this.then(void 0,t)}finally(t){return ro(super.finally(t),this)}then(t,n){return ro(super.then(t,n),this)}};function pl(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function dl(e){return Object.entries(e).reduce((t,[n,r])=>(t[pl(n)]=r,t),{})}function Zt(e){const t=dl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Zt):Zt(r))}return t}function Fo(e){return`tapps/${e}`}function Wo(e,t){sessionStorage.setItem(Fo(e),JSON.stringify(t))}function fl(e){const t=sessionStorage.getItem(Fo(e));try{return t?JSON.parse(t):void 0}catch{}}function ml(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function hl(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:o}=t,s=o===void 0?!0:o,i=typeof s=="boolean"?()=>s:s;function a(u,c,...l){if(c||i()){const p="font-weight:bold;padding:0 5px;border-radius:5px";console[u](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${p};background-color: lightblue;color:black`,"",`${p};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...l)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function Uo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function _l(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function bl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function j(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??bl(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??_l(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function R(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Uo())}}}function zo(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function yl(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var gl=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Go(e,t){return{kind:"validation",type:"check",reference:Go,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&j(this,"input",n,r),n}}}function Qo(e){return{kind:"validation",type:"integer",reference:Qo,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&j(this,"integer",t,n),t}}}function se(e){return{kind:"transformation",type:"transform",reference:se,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Jo(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function vl(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Te(e){return{kind:"schema",type:"boolean",reference:Te,expects:"boolean",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:j(this,"type",t,n),t}}}function Ko(e){return{kind:"schema",type:"date",reference:Ko,expects:"Date",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?j(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:j(this,"type",t,n),t}}}function Yo(e,t){return{kind:"schema",type:"instance",reference:Yo,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:j(this,"type",n,r),n}}}function wn(e){return{kind:"schema",type:"lazy",reference:wn,expects:"unknown",async:!1,getter:e,get"~standard"(){return R(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function Ce(e,t){return{kind:"schema",type:"loose_object",reference:Ce,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:Jo(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(j(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)zo(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else j(this,"type",n,r);return n}}}function nt(e){return{kind:"schema",type:"number",reference:nt,expects:"number",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:j(this,"type",t,n),t}}}function v(e,t){return{kind:"schema",type:"optional",reference:v,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return R(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Jo(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Zo(e,t,n){return{kind:"schema",type:"record",reference:Zo,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return R(this)},"~run"(r,o){var s,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const u in a)if(zo(a,u)){const c=a[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:a,key:u,value:c};for(const f of l.issues)f.path=[m],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:a,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else j(this,"type",r,o);return r}}}function y(e){return{kind:"schema",type:"string",reference:y,expects:"string",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:j(this,"type",t,n),t}}}function oo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function Sn(e,t){return{kind:"schema",type:"union",reference:Sn,expects:yl(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];j(this,"type",n,r,{issues:oo(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];j(this,"type",n,r,{issues:oo(i)})}return n}}}function Xo(){return{kind:"schema",type:"unknown",reference:Xo,expects:"unknown",async:!1,get"~standard"(){return R(this)},"~run"(e){return e.typed=!0,e}}}function es(e,t,n){const r=e["~run"]({value:t},Uo(n));if(r.issues)throw new gl(r.issues);return r.value}function ie(...e){return{...e[0],pipe:e,get"~standard"(){return R(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function El(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function wl(e){return Object.entries(e).reduce((t,[n,r])=>(t[El(n)]=r,t),{})}function Xt(e){const t=wl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Xt):Xt(r))}return t}function $n(e){return se(t=>e?Xt(t):t)}function ts(e){return t=>ie(e,$n(t))}function Sl(e){return(t,n)=>es(ie(e,$n(n)),t)}function Cn(){return se(JSON.parse)}function An(e){const t=ts(e);return n=>ie(y(),Cn(),t(n))}function $l(e){return se(t=>{const n={};return new URLSearchParams(t).forEach((r,o)=>{const s=n[o];Array.isArray(s)?s.push(r):s===void 0?n[o]=r:n[o]=[s,r]}),es(e,n)})}function ns(e){return t=>ie(Sn([y(),Yo(URLSearchParams)]),$l(e),$n(t))}const so=v(wn(()=>Pl())),Cl=Ce({id:nt(),photo_url:v(y()),type:y(),title:y(),username:v(y())}),Al=Ce({added_to_attachment_menu:v(Te()),allows_write_to_pm:v(Te()),first_name:y(),id:nt(),is_bot:v(Te()),is_premium:v(Te()),last_name:v(y()),language_code:v(y()),photo_url:v(y()),username:v(y())}),kl=Ce({auth_date:ie(y(),se(e=>new Date(Number(e)*1e3)),Ko()),can_send_after:v(ie(y(),se(Number),Qo())),chat:v(wn(()=>Ml())),chat_type:v(y()),chat_instance:v(y()),hash:y(),query_id:v(y()),receiver:so,start_param:v(y()),signature:y(),user:so}),Ml=An(Cl),Pl=An(Al),xl=ns(kl);function Tl(e){return/^#[\da-f]{6}$/i.test(e)}const rs=ts(Zo(y(),ie(Sn([y(),nt()]),se(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),Go(Tl)))),It=v(ie(y(),se(e=>e==="1"))),io=An(rs()),Bl=Ce({tgWebAppBotInline:It,tgWebAppData:v(xl()),tgWebAppDefaultColors:v(io()),tgWebAppFullscreen:It,tgWebAppPlatform:y(),tgWebAppShowSettings:It,tgWebAppStartParam:v(y()),tgWebAppThemeParams:io(),tgWebAppVersion:y()}),os=ns(Bl),Ol=Sl(os()),ss=Ce({eventType:y(),eventData:v(Xo())});function is(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,o])=>(Array.isArray(o)?n.push(...o.map(s=>[r,String(s)])):o!=null&&n.push([r,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":t(r,o)]),n),[])).toString()}function ql(e){return is(e)}function Il(e){return is(e,(t,n)=>t==="tgWebAppData"?ql(n):JSON.stringify(n))}function as(e){try{return vl(os(),e)}catch{return!1}}function jl(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}function Dl(e,t){const n=jl(),r=new Map,o=(s,i,a)=>{a||(a=!1);const u=r.get(s)||new Map;r.set(s,u);const c=u.get(i)||[];u.set(i,c);const l=c.findIndex(p=>p[1]===a);l>=0&&(n.off(s,c[l][0]),c.splice(l,1),!c.length&&u.delete(i),u.size||(r.delete(s),!r.size&&t()))};return[function(s,i,a){!r.size&&e();function u(){o(s,i,a)}function c(...m){a&&u(),s==="*"?i(m):i(...m)}n.on(s,c);const l=r.get(s)||new Map;r.set(s,l);const p=l.get(i)||[];return l.set(i,p),p.push([c,a||!1]),u},o,n.emit,function(){const s=n.all.size;n.all.clear(),r.clear(),s&&t()}]}function en(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let Ge=!1;const[kn,Nl]=hl("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return Ge}}),ao=e=>{kn(!1,"Event received:",e)};function Vl(e){e!==Ge&&(Ge=e,Ge?A("*",ao):T("*",ao))}const Ll={clipboard_text_received:F({req_id:re(),data:xe(re())}),custom_method_invoked:F({req_id:re(),result:Jt(jo()),error:Jt(re())}),popup_closed:xe(F({button_id:xe(re(),()=>{})}),{}),viewport_changed:F({height:Qt(),width:xe(Qt(),()=>window.innerWidth),is_state_stable:Gt(),is_expanded:Gt()}),theme_changed:F({theme_params:rs()})};function uo(e){if(e.source!==window.parent)return;let t;try{t=Kt(Do(re(),Cn(),ss),e.data)}catch{return}const{eventType:n,eventData:r}=t,o=Ll[n];try{const s=o?Kt(o,r):r;Rl(n,s)}catch(s){Nl(!0,[`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,s)}}const[A,T,Rl,Dm]=Dl(()=>{const e=window,t={receiveEvent:en};e.TelegramGameProxy_receiveEvent=en,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",uo)},()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]}),window.removeEventListener("message",uo)});function Hl(e){return t=>t instanceof e}function Ae(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Hl(n)]}const[us,Fl]=Ae("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[cs,Wl]=Ae("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]),Ul=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join(`
`),[ls,zl]=Ae("LaunchParamsRetrieveError",Ul),[ps,Gl]=Ae("InvalidLaunchParamsError",e=>[`Invalid value for launch params: ${e}`]),[ds,Ql]=Ae("UnknownEnvError"),[fs,Jl]=Ae("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);function Kl(e,t){t()}function Yl(e,t){t||(t={});const n=t.equals||Object.is;let r=[],o=e;const s=c=>{if(!n(o,c)){const l=o;o=c,Kl(u,()=>{[...r].forEach(([p,m])=>{p(c,l),m&&a(p,!0)})})}};function i(c){const l=typeof c!="object"?{once:c}:c;return{once:l.once||!1,signal:l.signal||!1}}const a=(c,l)=>{const p=i(l),m=r.findIndex(([f,k])=>f===c&&k.once===p.once&&k.signal===p.signal);m>=0&&r.splice(m,1)},u=Object.assign(function(){return Zl(u),o},{destroy(){r=[]},set:s,reset(){s(e)},sub(c,l){return r.push([c,i(l)]),()=>a(c,l)},unsub:a,unsubAll(){r=r.filter(c=>c[1].signal)}});return u}const jt=[];function Zl(e){jt.length&&jt[jt.length-1].add(e)}const ms=Yl("https://web.telegram.org");function Mn(e,t){kn(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(Vo())return n.parent.postMessage(r,ms());if(No(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(tt(F({external:F({notify:En()})}),n)){n.external.notify(r);return}throw new ds}function Pn(e,t,n){n||(n={});const{capture:r}=n,[o,s]=ml();return new Ho(i=>{(Array.isArray(t)?t:[t]).forEach(a=>{o(A(a,u=>{(!r||(Array.isArray(t)?r({event:a,payload:u}):r(u)))&&i(u)}))}),(n.postEvent||Mn)(e,n.params)},n).finally(s)}const co="launchParams";function lo(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function xn(){for(const e of[()=>lo(window.location.href),()=>{const t=performance.getEntriesByType("navigation")[0];return t&&lo(t.name)},()=>fl(co)]){const t=e();if(t&&as(t))return Wo(co,t),t}throw new ls}function rt(e){const t=Ol(xn());return e?Zt(t):t}function tn(e,t){if(!e)try{return rt(),!0}catch{return!1}return Ho.fn(async n=>{if(No(window))return!0;try{return await Pn("web_app_request_theme","theme_changed",n),!0}catch{return!1}},t||{timeout:100})}function Xl({launchParams:e,onEvent:t}={}){if(e){const o=typeof e=="string"||e instanceof URLSearchParams?e.toString():Il({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");if(!as(o))throw new ps(o);Wo("launchParams",o)}if(Vo()){const o=Do(re(),Cn(),ss),s=window.parent.postMessage.bind(window.parent);window.parent.postMessage=(...i)=>{const[a]=i,u=()=>{s(...i)};if(tt(o,a)&&t){const c=Kt(o,a);t([c.eventType,c.eventData],u)}else u()};return}const n=window.TelegramWebviewProxy||{},{postEvent:r}=n;window.TelegramWebviewProxy={...n,postEvent(o,s){const i=()=>{r&&r(o,s)};t?t([o,s?JSON.parse(s):void 0],i):i()}},kn(!1,"Environment was mocked by the mockTelegramEnv function")}function hs(){return new URLSearchParams(xn()).get("tgWebAppData")||void 0}function _s(e){return({req_id:t})=>t===e}function po(e){return e.split(".").map(Number)}function ep(e,t){const n=po(e),r=po(t),o=Math.max(n.length,r.length);for(let s=0;s<o;s+=1){const i=n[s]||0,a=r[s]||0;if(i!==a)return i>a?1:-1}return 0}function P(e,t){return ep(e,t)<=0}function ae(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return P("6.4",n);if(t==="try_browser")return P("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return P("6.9",n);if(e==="web_app_close"&&t==="return_back")return P("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return P("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return P("6.1",t);case"web_app_open_popup":return P("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return P("6.4",t);case"web_app_switch_inline_query":return P("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return P("6.9",t);case"web_app_setup_settings_button":return P("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return P("7.2",t);case"web_app_setup_swipe_behavior":return P("7.7",t);case"web_app_share_to_story":return P("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return P("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return P("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function bs(e,t){t||(t="strict");const n=typeof t=="function"?t:r=>{const{method:o,version:s}=r,i="param"in r?new cs(o,r.param,s):new us(o,s);if(t==="strict")throw i;return console.warn(i.message)};return(r,o)=>ae(r,e)?r==="web_app_set_header_color"&&tt(F({color:Io()}),o)&&!ae(r,"color",e)?n({version:e,method:r,param:"color"}):Mn(r,o):n({version:e,method:r})}function tp(e,t,n,r){return Pn("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:n},capture:_s(n)}).then(({result:o,error:s})=>{if(s)throw new fs(s);return o})}function ys(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function np(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`)}function gs(e){return`tapps/${e}`}function U(e,t){sessionStorage.setItem(gs(e),JSON.stringify(t))}function z(e){const t=sessionStorage.getItem(gs(e));try{return t?JSON.parse(t):void 0}catch{}}function Tn(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function rp(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:o}=t,s=o===void 0?!0:o,i=typeof s=="boolean"?()=>s:s;function a(u,c,...l){if(c||i()){const p="font-weight:bold;padding:0 5px;border-radius:5px";console[u](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${p};background-color: lightblue;color:black`,"",`${p};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...l)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function op(){return performance.getEntriesByType("navigation")[0]}function G(){const e=op();return!!e&&e.type==="reload"}let Ee;function sp(e,t){Ee&&Ee.set(e,t)||t()}function nn(e){if(Ee)return e();Ee=new Map;try{e()}finally{Ee.forEach(t=>t()),Ee=void 0}}function vs(e,t){t||(t={});const n=t.equals||Object.is;let r=[],o=e;const s=c=>{if(!n(o,c)){const l=o;o=c,sp(u,()=>{[...r].forEach(([p,m])=>{p(c,l),m&&a(p,!0)})})}};function i(c){const l=typeof c!="object"?{once:c}:c;return{once:l.once||!1,signal:l.signal||!1}}const a=(c,l)=>{const p=i(l),m=r.findIndex(([f,k])=>f===c&&k.once===p.once&&k.signal===p.signal);m>=0&&r.splice(m,1)},u=Object.assign(function(){return ip(u),o},{destroy(){r=[]},set:s,reset(){s(e)},sub(c,l){return r.push([c,i(l)]),()=>a(c,l)},unsub:a,unsubAll(){r=r.filter(c=>c[1].signal)}});return u}const Oe=[];function ip(e){Oe.length&&Oe[Oe.length-1].add(e)}function ap(e,t){let n=new Set,r;function o(){return r||(r=vs(i(),t))}function s(){o().set(i())}function i(){n.forEach(c=>{c.unsub(s,{signal:!0})});const a=new Set;let u;Oe.push(a);try{u=e()}finally{Oe.pop()}return a.forEach(c=>{c.sub(s,{signal:!0})}),n=a,u}return Object.assign(function(){return o()()},{destroy(){o().destroy()},sub(...a){return o().sub(...a)},unsub(...a){o().unsub(...a)},unsubAll(...a){o().unsubAll(...a)}})}function ke(e,t){return vs(e,t)}function _(e,t){return ap(e,t)}function b(e,t){const n=ke(e,t);return[n,_(n)]}let Es=!1;const[rn,Nm]=rp("SDK",{bgColor:"forestgreen",textColor:"white",shouldLog(){return Es}});function up(e){Es=e,Vl(e)}const Dt=ke(0),ws=ke(Mn),[fo,Bn]=b({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),oe=_(()=>Bn().tgWebAppVersion);function Ss(e){e||(e={});const{postEvent:t}=e,n=e.launchParams||rt();fo.set(n),ws.set(typeof t=="function"?t:bs(n.tgWebAppVersion)),rn(!1,"The package was configured. Launch params:",fo())}function On(){return Dt.set(Dt()+1),Dt().toString()}function me(e,t,n){return tp(e,t,On(),{...n||{},postEvent:h})}const w=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=h),Pn(e,t,n)),h=(e,t)=>ws()(e,t);function Q(e){return _(()=>ae(e,oe()))}function cp(e){return t=>t instanceof e}function Y(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,cp(n)]}function he(e){return[e]}const[ot,lp]=Y("CSSVarsBoundError","CSS variables are already bound"),[qn,pp]=Y("NotAvailableError",he),[dp,fp]=Y("InvalidEnvError",he),[ve,mp]=Y("FunctionNotAvailableError",he),[W,hp]=Y("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[$s,_p]=Y("ConcurrentCallError",he),[Cs,bp]=Y("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[In,yp]=Y("AccessDeniedError",he),[As,gp]=Y("FullscreenFailedError",he),[ks,vp]=Y("ShareMessageError",he);function on(){return typeof window>"u"}function C(e,t,n){n||(n={});const{isSupported:r,isMounted:o,isMounting:s,component:i,supports:a}=n||{},u=`${i?`${i}.`:""}${e}()`,c=r?Array.isArray(r)||typeof r=="object"&&"any"in r?r:[r]:void 0;function l(S){if(a){const $=a[S];return ae($[0],$[1],oe())}return!0}function p(){if(!c)return;function S(L){return typeof L=="function"?L():ae(L,oe())?void 0:`it is unsupported in Mini Apps version ${oe()}`}const $=Array.isArray(c)?c:c.any,q=$.map(S).filter(Boolean);return Array.isArray(c)?q[0]:q.length===$.length?q[q.length-1]:void 0}function m(...S){for(const $ in a)if(a[$][2](...S)&&!l($))return`option ${$} is not supported in Mini Apps version ${oe()}`}let f;if(a){f={};for(const S in a)f[S]=_(()=>l(S))}const k=_(()=>!p()),ge=_(()=>oe()!=="0.0"),M=_(()=>!o||o()),ne=_(()=>tn()&&!on()&&ge()&&k()&&M());return Object.assign((...S)=>{const $=`Unable to call the ${u} ${i?"method":"function"}:`;if(on()||!tn())throw new ve(`${$} it can't be called outside Mini Apps`);if(!ge())throw new ve(`${$} the SDK was not initialized. Use the SDK init() function`);const q=p();if(q)throw new ve(`${$} ${q}`);const L=m(...S);if(L)throw new ve(`${$} ${L}`);if(!M()){const d=s&&s()?"mounting. Wait for the mount completion":`unmounted. Use the ${i}.mount() method`;throw new ve(`${$} the component is ${d}`)}return t(...S)},t,{isAvailable:ne,ifAvailable(...S){return ne()?[!0,t(...S)]:[!1]}},c?{isSupported:k}:{},f?{supports:f}:{})}function st(e,t){return t||(t={}),(n,r,o,s)=>C(n,r,{...t,isSupported:o||t.isSupported,supports:s,component:e})}function le(e,t,n){return st(e,{isSupported:n,isMounted:t})}function V(e,t){return st(e,{isSupported:t})}const it="web_app_setup_back_button",Ms="back_button_pressed",at="backButton",[mo,Ps]=b(!1),[Je,xs]=b(!1),Ts=Q(it),Bs=le(at,Je,it),jn=V(at,it),Os=Bs("hide",()=>{Dn(!1)}),qs=jn("mount",()=>{Je()||(Dn(G()&&z(at)||!1),Je.set(!0))});function Dn(e){e!==mo()&&(h(it,{is_visible:e}),U(at,e),mo.set(e))}const Is=jn("onClick",e=>A(Ms,e)),js=jn("offClick",e=>{T(Ms,e)}),Ds=Bs("show",()=>{Dn(!0)});function Ns(){Je.set(!1)}const Ep=Object.freeze(Object.defineProperty({__proto__:null,hide:Os,isMounted:xs,isSupported:Ts,isVisible:Ps,mount:qs,offClick:js,onClick:Is,show:Ds,unmount:Ns},Symbol.toStringTag,{value:"Module"}));var wp=Object.defineProperty,Sp=(e,t,n)=>t in e?wp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sn=(e,t,n)=>Sp(e,typeof t!="symbol"?t+"":t,n);function $p(e){return t=>t instanceof e}function Vs(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,$p(n)]}const[Cp,Ap]=Vs("CancelledError","Promise was canceled"),[kp,Vm]=Vs("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),Ls=Symbol("Resolved");function ho(e){return Array.isArray(e)&&e[0]===Ls}function Mp(e){return[Ls,e]}function _o(e,t){return e.reject=t.reject,e.abort=t.abort,e}let x=class an extends Promise{constructor(t,n){let r,o;super((s,i)=>{let a,u;typeof t=="function"?(a=t,u=n):u=t;const c=[],l=d=>(...I)=>{const ee=d(...I);return c.forEach(qt=>qt()),ee},p=new AbortController,{signal:m}=p;o=d=>{!m.aborted&&p.abort(d)};const f=()=>m.reason,k=d=>{const I=()=>{d(f())};m.addEventListener("abort",I,!0);const ee=()=>{m.removeEventListener("abort",I,!0)};return c.push(ee),ee},ge=l(d=>{s(d),o(Mp(d))});r=l(d=>{i(d),o(d)}),u||(u={});const{abortSignal:M,rejectOnAbort:ne=!0}=u;if(M)if(M.aborted){const{reason:d}=M;if(ne)return r(d);o(d)}else{const d=()=>{o(M.reason)};M.addEventListener("abort",d),c.push(()=>{M.removeEventListener("abort",d)})}ne&&k(i);const{timeout:S}=u;if(S){const d=setTimeout(()=>{o(new kp(S))},S);c.push(()=>{clearTimeout(d)})}const $=()=>m.aborted,q=()=>ho(f()),L=()=>{const d=f();return ho(d)?d[1]:void 0};try{const d=a&&a(ge,r,{abortReason:f,abortSignal:m,isAborted:$,isResolved:q,onAborted:k,onResolved:I=>k(()=>{q()&&I(L())}),resolved:L,throwIfAborted(){if($())throw f()}});d instanceof Promise&&d.catch(r)}catch(d){r(d)}}),sn(this,"abort"),sn(this,"reject"),this.abort=o,this.reject=r}static fn(t,n){return new an(async(r,o,s)=>{try{r(await t(s))}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new an((n,r)=>{r(t)})}cancel(){this.abort(new Cp)}catch(t){return this.then(void 0,t)}finally(t){return _o(super.finally(t),this)}then(t,n){return _o(super.then(t,n),this)}};function bo(e,t){return e.resolve=t.resolve,e}let Pp=class un extends x{constructor(t,n){let r,o;typeof t=="function"?(r=t,o=n):o=t;let s;super((i,a,u)=>{s=i,r&&r(i,a,u)},o),sn(this,"resolve"),this.resolve=s}static fn(t,n){return new un((r,o,s)=>{try{Promise.resolve(t(s)).then(r,o)}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new un((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return bo(super.finally(t),this)}then(t,n){return bo(super.then(t,n),this)}};function O(e,t,n){n||(n={});const{promise:r,error:o}=n,[s,i]=r?[r,_(r)]:b(),[a,u]=o?[o,_(o)]:b();return[Object.assign((...c)=>{if(s()){const p=new $s(t);return a.set(p),x.reject(p)}nn(()=>{s.set(e(...c)),a.set(void 0)});let l;return s().catch(p=>{throw l=p,p}).finally(()=>{nn(()=>{s.set(void 0),a.set(l)})})},e),[s,i,_(()=>!!s())],[a,u]]}function He(e,t,n){const[r,...o]=O(t,`The ${e} component is already mounting`),[s,i]=b(!1);return[(...a)=>s()?x.resolve():r(...a).then(u=>{nn(()=>{s.set(!0),n(u)})}),...o,[s,i]]}const[Nn,Rs]=b({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),Hs=_(()=>Nn().available),yo="web_app_biometry_get_info",Fs=C("requestBiometry",e=>w(yo,"biometry_info_received",e),{isSupported:yo});function Vn(e){if(!Ap(e))throw e}function Me(e){const t=e();t&&t.catch(Vn).cancel()}const Ne="biometry",ut="web_app_biometry_request_auth",Ln="biometry_info_received",Ws=e=>{ct(Rn(e))};function Us(){throw new qn("Biometry is not available")}function Rn(e){let t=!1,n=!1,r="",o=!1,s="",i=!1;return e.available&&(t=!0,n=e.token_saved,r=e.device_id,o=e.access_requested,s=e.type,i=e.access_granted),{available:t,tokenSaved:n,deviceId:r,type:s,accessGranted:i,accessRequested:o}}const zs=Q(ut),[xp,Tp,Bp,Gs]=He(Ne,e=>{const t=G()&&z(Ne);return t?x.resolve(t):Fs({abortSignal:e}).then(Rn)},e=>{A(Ln,Ws),ct(e)}),Qs=V(Ne,ut),Hn=le(Ne,Gs[0],ut),Js=Qs("mount",xp),[,Fn,Ks]=Tp,[,Ys]=Bp,[Op,Zs]=Gs,[qp,Ip,jp]=O(e=>x.fn(async t=>{const n=Nn();n.available||Us();const r=await w(ut,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:o}=r;return typeof o=="string"&&ct({...n,token:o}),r},e),"Biometry authentication is already in progress"),Xs=Hn("authenticate",qp),[,Wn,ei]=Ip,[,ti]=jp,ni=Qs("openSettings",()=>{h("web_app_biometry_open_settings")}),[Dp,Np,Vp]=O(e=>x.fn(async t=>{const n=await w("web_app_biometry_request_access",Ln,{...e,...t,params:{reason:(e||{}).reason||""}}).then(Rn);return n.available||Us(),ct(n),n.accessGranted},e),"Biometry access request is already in progress"),ri=Hn("requestAccess",Dp),[,Un,oi]=Np,[,si]=Vp;function ct(e){Nn.set(e),U(Ne,e)}function ii(){[Wn,Un,Fn].forEach(Me),T(Ln,Ws),Op.set(!1)}const ai=Hn("updateToken",e=>(e||(e={}),w("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status))),Lp=Object.freeze(Object.defineProperty({__proto__:null,authError:ti,authPromise:Wn,authenticate:Xs,isAuthenticating:ei,isAvailable:Hs,isMounted:Zs,isMounting:Ks,isRequestingAccess:oi,isSupported:zs,mount:Js,mountError:Ys,mountPromise:Fn,openSettings:ni,requestAccess:ri,requestAccessError:si,requestAccessPromise:Un,state:Rs,unmount:ii,updateToken:ai},Symbol.toStringTag,{value:"Module"}));function lt(e,t){return st(e,{isMounted:t})}const pe=st,pt="closingBehavior",[go,ui]=b(!1),[cn,zn]=b(!1),ci=lt(pt,zn),Rp=pe(pt),li=ci("disableConfirmation",()=>{Gn(!1)}),pi=ci("enableConfirmation",()=>{Gn(!0)}),di=Rp("mount",()=>{cn()||(Gn(G()&&z(pt)||!1),cn.set(!0))});function Gn(e){e!==go()&&(h("web_app_setup_closing_behavior",{need_confirmation:e}),U(pt,e),go.set(e))}function fi(){cn.set(!1)}const Hp=Object.freeze(Object.defineProperty({__proto__:null,disableConfirmation:li,enableConfirmation:pi,isConfirmationEnabled:ui,isMounted:zn,mount:di,unmount:fi},Symbol.toStringTag,{value:"Module"}));var te;function mi(e){return{lang:(e==null?void 0:e.lang)??(te==null?void 0:te.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(te==null?void 0:te.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(te==null?void 0:te.abortPipeEarly)}}var Nt;function Fp(e){return Nt==null?void 0:Nt.get(e)}var Vt;function Wp(e){return Vt==null?void 0:Vt.get(e)}var Lt;function Up(e,t){var n;return(n=Lt==null?void 0:Lt.get(e))==null?void 0:n.get(t)}function zp(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function D(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??zp(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??Up(e.reference,u.lang)??(c?Wp(u.lang):null)??r.message??Fp(u.lang);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function Z(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},mi())}}}function hi(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Gp(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var ln=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function _i(e,t){return{kind:"validation",type:"check",reference:_i,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&D(this,"input",n,r),n}}}function bi(e){return{kind:"validation",type:"integer",reference:bi,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&D(this,"integer",t,n),t}}}function Qn(e){return{kind:"transformation",type:"transform",reference:Qn,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function yi(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function gi(e,t){return{kind:"schema",type:"array",reference:gi,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){var s;const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let i=0;i<o.length;i++){const a=o[i],u=this.item["~run"]({value:a},r);if(u.issues){const c={type:"array",origin:"value",input:o,key:i,value:a};for(const l of u.issues)l.path?l.path.unshift(c):l.path=[c],(s=n.issues)==null||s.push(l);if(n.issues||(n.issues=u.issues),r.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}}else D(this,"type",n,r);return n}}}function Jn(e){return{kind:"schema",type:"date",reference:Jn,expects:"Date",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?D(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:D(this,"type",t,n),t}}}function vi(e,t){return{kind:"schema",type:"instance",reference:vi,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:D(this,"type",n,r),n}}}function pn(e,t){return{kind:"schema",type:"loose_object",reference:pn,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){var s;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in o||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in o?o[i]:yi(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:o,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(s=n.issues)==null||s.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(D(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:o,key:i,value:o[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in o)hi(o,i)&&!(i in this.entries)&&(n.value[i]=o[i])}else D(this,"type",n,r);return n}}}function Kn(e){return{kind:"schema",type:"number",reference:Kn,expects:"number",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:D(this,"type",t,n),t}}}function Ei(e,t){return{kind:"schema",type:"optional",reference:Ei,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=yi(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function wi(e,t,n){return{kind:"schema",type:"record",reference:wi,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Z(this)},"~run"(r,o){var i,a;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const u in s)if(hi(s,u)){const c=s[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:s,key:u,value:c};for(const f of l.issues)f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:s,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(a=r.issues)==null||a.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else D(this,"type",r,o);return r}}}function H(e){return{kind:"schema",type:"string",reference:H,expects:"string",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:D(this,"type",t,n),t}}}function vo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function Si(e,t){return{kind:"schema",type:"union",reference:Si,expects:Gp(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];D(this,"type",n,r,{issues:vo(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];D(this,"type",n,r,{issues:vo(i)})}return n}}}function dt(e,t,n){const r=e["~run"]({value:t},mi(n));if(r.issues)throw new ln(r.issues);return r.value}function qe(...e){return{...e[0],pipe:e,get"~standard"(){return Z(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}const $i="web_app_invoke_custom_method",Fe=V("cloudStorage",$i),Ci=Q($i),Yn=Fe("deleteItem",(e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?me("deleteStorageValues",{keys:n},t).then():x.resolve()});function Qp(e,t){const n=Array.isArray(e)?e:[e];return n.length?me("getStorageValues",{keys:n},t).then(r=>dt(wi(qe(H(),_i(o=>n.includes(o))),H()),r)):x.resolve(typeof e=="string"?"":{})}const Ai=Fe("getItem",Qp),Zn=Fe("getKeys",e=>me("getStorageKeys",{},e).then(t=>dt(gi(H()),t))),ki=Fe("setItem",(e,t,n)=>me("saveStorageValue",{key:e,value:t},n).then()),Jp=Fe("clear",e=>Zn(e).then(Yn)),Kp=Object.freeze(Object.defineProperty({__proto__:null,clear:Jp,deleteItem:Yn,getItem:Ai,getKeys:Zn,isSupported:Ci,setItem:ki},Symbol.toStringTag,{value:"Module"})),We="web_app_trigger_haptic_feedback",Xn=V("hapticFeedback",We),Mi=Q(We),Pi=Xn("impactOccurred",e=>{h(We,{type:"impact",impact_style:e})}),xi=Xn("notificationOccurred",e=>{h(We,{type:"notification",notification_type:e})}),Ti=Xn("selectionChanged",()=>{h(We,{type:"selection_change"})}),Yp=Object.freeze(Object.defineProperty({__proto__:null,impactOccurred:Pi,isSupported:Mi,notificationOccurred:xi,selectionChanged:Ti},Symbol.toStringTag,{value:"Module"})),[Bi,Oi]=b(void 0);function X(e){return _(()=>{const t=Bi();return t?t[e]:void 0})}const er=X("auth_date"),tr=X("can_send_after"),qi=_(()=>{const e=er(),t=tr();return t&&e?new Date(e.getTime()+t*1e3):void 0}),Ii=X("chat"),ji=X("chat_type"),Di=X("chat_instance"),Ni=X("hash"),Vi=X("query_id"),[Zp,Li]=b(),Ri=X("receiver");function Hi(){const e=rt();Bi.set(e.tgWebAppData),Zp.set(hs())}const Fi=X("start_param"),Wi=X("user"),Xp=Object.freeze(Object.defineProperty({__proto__:null,authDate:er,canSendAfter:tr,canSendAfterDate:qi,chat:Ii,chatInstance:Di,chatType:ji,hash:Ni,queryId:Vi,raw:Li,receiver:Ri,restore:Hi,startParam:Fi,state:Oi,user:Wi},Symbol.toStringTag,{value:"Module"})),nr="web_app_open_invoice",ed=V("invoice",nr),Ui=Q(nr);function td(e,t,n){let r;if(t==="url"){const{hostname:o,pathname:s}=new URL(e,window.location.href);if(o!=="t.me")throw new W(`Link has unexpected hostname: ${o}`);const i=s.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!i)throw new W('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=i}else r=e,n=t;return w(nr,"invoice_closed",{...n,params:{slug:r},capture:o=>r===o.slug}).then(o=>o.status)}const[nd,rd,od]=O(td,"Invoice is already opened"),zi=ed("open",nd),[,Gi,Qi]=rd,[,Ji]=od,sd=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Qi,isSupported:Ui,open:zi,openError:Ji,openPromise:Gi},Symbol.toStringTag,{value:"Module"})),Ie="locationManager",rr="web_app_check_location",Eo="web_app_open_location_settings",Ke=ke({available:!1,accessGranted:!1,accessRequested:!1});function or(e){return _(()=>Ke()[e])}const Ki=Q(rr),Yi=or("available"),Zi=or("accessGranted"),Xi=or("accessRequested");function id(e){let t=!1,n,r;return e.available&&(t=!0,n=e.access_requested,r=e.access_granted),{available:t,accessGranted:r||!1,accessRequested:n||!1}}const[ad,ud,cd,ea]=He(Ie,e=>{const t=G()&&z(Ie);return t?x.resolve(t):w("web_app_check_location","location_checked",e).then(id)},e=>{Ke.set(e),U(Ie,e)}),ta=V(Ie,rr),ld=le(Ie,ea[0],rr),na=ta("mount",ad),[,ra,oa]=ud,[,sa]=cd,[pd,ia]=ea,[dd,fd,md]=O(e=>w("web_app_request_location","location_requested",e).then(t=>{if(!t.available)throw Ke.set({...Ke(),available:!1}),new qn("Location data tracking is not available");const{available:n,...r}=t;return r}),"Location request is currently in progress"),aa=ld("requestLocation",dd),[,sr,ua]=fd,[,ca]=md,la=ta("openSettings",()=>{h(Eo)},Eo);function pa(){Me(sr),pd.set(!1)}const hd=Object.freeze(Object.defineProperty({__proto__:null,isAccessGranted:Zi,isAccessRequested:Xi,isAvailable:Yi,isMounted:ia,isMounting:oa,isRequestingLocation:ua,isSupported:Ki,mount:na,mountError:sa,mountPromise:ra,openSettings:la,requestLocation:aa,requestLocationError:ca,requestLocationPromise:sr,unmount:pa},Symbol.toStringTag,{value:"Module"}));function ir(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=r)}return t}function da(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function _d(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function bd(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function N(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??bd(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??_d(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function J(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},da())}}}function fa(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function yd(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var gd=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ma(e,t){return{kind:"validation",type:"check",reference:ma,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&N(this,"input",n,r),n}}}function ha(e){return{kind:"validation",type:"integer",reference:ha,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&N(this,"integer",t,n),t}}}function ue(e){return{kind:"transformation",type:"transform",reference:ue,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function _a(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Be(e){return{kind:"schema",type:"boolean",reference:Be,expects:"boolean",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:N(this,"type",t,n),t}}}function ba(e){return{kind:"schema",type:"date",reference:ba,expects:"Date",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?N(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:N(this,"type",t,n),t}}}function ya(e,t){return{kind:"schema",type:"instance",reference:ya,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:N(this,"type",n,r),n}}}function ar(e){return{kind:"schema",type:"lazy",reference:ar,expects:"unknown",async:!1,getter:e,get"~standard"(){return J(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function Ue(e,t){return{kind:"schema",type:"loose_object",reference:Ue,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:_a(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(N(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)fa(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else N(this,"type",n,r);return n}}}function ft(e){return{kind:"schema",type:"number",reference:ft,expects:"number",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:N(this,"type",t,n),t}}}function E(e,t){return{kind:"schema",type:"optional",reference:E,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return J(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=_a(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function ga(e,t,n){return{kind:"schema",type:"record",reference:ga,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return J(this)},"~run"(r,o){var s,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const u in a)if(fa(a,u)){const c=a[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:a,key:u,value:c};for(const f of l.issues)f.path=[m],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:a,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else N(this,"type",r,o);return r}}}function g(e){return{kind:"schema",type:"string",reference:g,expects:"string",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:N(this,"type",t,n),t}}}function wo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function ur(e,t){return{kind:"schema",type:"union",reference:ur,expects:yd(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];N(this,"type",n,r,{issues:wo(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];N(this,"type",n,r,{issues:wo(i)})}return n}}}function va(e,t,n){const r=e["~run"]({value:t},da(n));if(r.issues)throw new gd(r.issues);return r.value}function ce(...e){return{...e[0],pipe:e,get"~standard"(){return J(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function vd(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Ed(e){return Object.entries(e).reduce((t,[n,r])=>(t[vd(n)]=r,t),{})}function dn(e){const t=Ed(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(dn):dn(r))}return t}function cr(e){return ue(t=>e?dn(t):t)}function Ea(e){return t=>ce(e,cr(t))}function wa(e){return(t,n)=>va(ce(e,cr(n)),t)}function Sa(){return ue(JSON.parse)}function lr(e){const t=Ea(e);return n=>ce(g(),Sa(),t(n))}function pr(e){return ue(t=>{const n={};return new URLSearchParams(t).forEach((r,o)=>{const s=n[o];Array.isArray(s)?s.push(r):s===void 0?n[o]=r:n[o]=[s,r]}),va(e,n)})}function $a(e){return t=>ce(ur([g(),ya(URLSearchParams)]),pr(e),cr(t))}const So=E(ar(()=>Ad())),wd=Ue({id:ft(),photo_url:E(g()),type:g(),title:g(),username:E(g())}),Sd=Ue({added_to_attachment_menu:E(Be()),allows_write_to_pm:E(Be()),first_name:g(),id:ft(),is_bot:E(Be()),is_premium:E(Be()),last_name:E(g()),language_code:E(g()),photo_url:E(g()),username:E(g())}),$d=Ue({auth_date:ce(g(),ue(e=>new Date(Number(e)*1e3)),ba()),can_send_after:E(ce(g(),ue(Number),ha())),chat:E(ar(()=>Cd())),chat_type:E(g()),chat_instance:E(g()),hash:g(),query_id:E(g()),receiver:So,start_param:E(g()),signature:g(),user:So}),Cd=lr(wd),Ad=lr(Sd),Ca=$a($d);function fe(e){return/^#[\da-f]{6}$/i.test(e)}function Aa(e){return/^#[\da-f]{3}$/i.test(e)}function ka(e){const t=e.replace(/\s/g,"").toLowerCase();if(fe(t))return t;if(Aa(t)){let r="#";for(let o=0;o<3;o+=1)r+=t[1+o].repeat(2);return r}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((r,o)=>r+parseInt(o,10).toString(16).padStart(2,"0"),"#")}const kd=Ea(ga(g(),ce(ur([g(),ft()]),ue(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),ma(fe)))),Rt=E(ce(g(),ue(e=>e==="1"))),$o=lr(kd()),Md=Ue({tgWebAppBotInline:Rt,tgWebAppData:E(Ca()),tgWebAppDefaultColors:E($o()),tgWebAppFullscreen:Rt,tgWebAppPlatform:g(),tgWebAppShowSettings:Rt,tgWebAppStartParam:E(g()),tgWebAppThemeParams:$o(),tgWebAppVersion:g()}),Pd=$a(Md),xd=wa(Ca()),Td=wa(Pd());function dr(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,o])=>(Array.isArray(o)?n.push(...o.map(s=>[r,String(s)])):o!=null&&n.push([r,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":t(r,o)]),n),[])).toString()}function Ma(e){return dr(e)}function Bd(e){return dr(e,(t,n)=>t==="tgWebAppData"?Ma(n):JSON.stringify(n))}function fr(e){const t=ka(e);return Math.sqrt([.299,.587,.114].reduce((n,r,o)=>{const s=parseInt(t.slice(1+o*2,1+(o+1)*2),16);return n+s*s*r},0))<120}const[Ht,Pa]=b(!1),[we,xa]=b({});function B(e){return _(()=>we()[e])}const Ta=B("accent_text_color"),ze=B("bg_color"),mt=B("button_color"),mr=B("button_text_color"),hr=B("bottom_bar_bg_color"),Ba=B("destructive_text_color"),Oa=B("header_bg_color"),qa=B("hint_color"),Ia=_(()=>{const e=ze();return!e||fr(e)}),ja=B("link_color"),Ve=B("secondary_bg_color"),Da=B("section_bg_color"),Na=B("section_header_text_color"),Va=B("section_separator_color"),La=B("subtitle_text_color"),Ra=B("text_color");function _e(e){return _(()=>ht()[e])}const je=ke({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),ht=_(()=>{const e=je();return{...e,backgroundColor:e.backgroundColor||mt()||"#2481cc",textColor:e.textColor||mr()||"#ffffff"}}),[fn,_r]=b(!1),Ha=_e("backgroundColor"),Fa=_e("hasShineEffect"),Wa=_e("isEnabled"),Ua=_e("isLoaderVisible"),za=_e("isVisible"),Ga=_e("text"),Qa=_e("textColor"),Od="web_app_setup_main_button",Ja="main_button_pressed",_t="mainButton",br=pe(_t),qd=lt(_t,_r),Ka=br("mount",()=>{if(!fn()){const e=G()&&z(_t);e&&je.set(e),fn.set(!0)}}),Ya=br("onClick",e=>A(Ja,e)),Za=br("offClick",e=>{T(Ja,e)}),Xa=qd("setParams",e=>{je.set({...je(),...ir(e)}),U(_t,je());const t=ht();t.text&&h(Od,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})});function eu(){fn.set(!1)}const Id=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Ha,hasShineEffect:Fa,isEnabled:Wa,isLoaderVisible:Ua,isMounted:_r,isVisible:za,mount:Ka,offClick:Za,onClick:Ya,setParams:Xa,state:ht,text:Ga,textColor:Qa,unmount:eu},Symbol.toStringTag,{value:"Module"}));function yr(e,t){document.documentElement.style.setProperty(e,t)}function gr(e){document.documentElement.style.removeProperty(e)}const Le="themeParams",tu="theme_changed",jd=pe(Le),nu=({theme_params:e})=>{we.set(e),U(Le,e)},[Dd,Nd,Vd,ru]=He(Le,e=>{const t=G()&&z(Le);return t?x.resolve(t):w("web_app_request_theme","theme_changed",e).then(n=>n.theme_params)},e=>{A(tu,nu),we.set(e)}),Ld=lt(Le,ru[0]),ou=Ld("bindCssVars",e=>{if(Ht())throw new ot;e||(e=r=>`--tg-theme-${np(r)}`);function t(r){Object.entries(we()).forEach(([o,s])=>{s&&r(o,s)})}function n(){t((r,o)=>{yr(e(r),o)})}return n(),we.sub(n),Ht.set(!0),()=>{t(gr),we.unsub(n),Ht.set(!1)}}),vr=jd("mount",Dd),[,Er,su]=Nd,[,iu]=Vd,[Rd,au]=ru;function uu(){Me(Er),T(tu,nu),Rd.set(!1)}function cu(e){return _(()=>{const t=e();return fe(t)?t:t==="bg_color"?ze():Ve()})}const[Ye,lu]=b("bg_color"),bt=cu(Ye),[Ze,pu]=b("bottom_bar_bg_color"),yt=_(()=>{const e=Ze();return fe(e)?e:e==="bottom_bar_bg_color"?hr()||Ve():e==="secondary_bg_color"?Ve():ze()}),[Xe,du]=b("bg_color"),wr=cu(Xe),[Ft,fu]=b(!1),mu=_(()=>{const e=bt();return e?fr(e):!1}),[Sr,hu]=b(!0),$r=_(()=>({backgroundColor:Ye(),bottomBarColor:Ze(),headerColor:Xe(),isActive:Sr()})),mn="web_app_set_background_color",hn="web_app_set_bottom_bar_color",Qe="web_app_set_header_color",_u="visibility_changed",$e="miniApp",Cr={any:[mn,hn,Qe]},bu=_(()=>Cr.any.some(e=>ae(e,oe()))),yu=e=>{Sr.set(e.is_visible),vt()},[Hd,Fd,Wd,gu]=He($e,e=>vr(e).then(()=>G()&&z($e)||void 0),e=>{kr.ifAvailable(e?e.backgroundColor:"bg_color"),Mr.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),Pr.ifAvailable(e?e.headerColor:"bg_color"),Sr.set(e?e.isActive:!0),A(_u,yu)}),vu=pe($e),Ud=V($e,Cr),gt=le($e,gu[0],Cr),Eu=gt("bindCssVars",e=>{if(Ft())throw new ot;const[t,n]=Tn();function r(o,s){function i(){yr(o,s()||null)}i(),t(s.sub(i),gr.bind(null,o))}return e||(e=o=>`--tg-${ys(o)}`),r(e("bgColor"),bt),r(e("bottomBarColor"),yt),r(e("headerColor"),wr),t(()=>{Ft.set(!1)}),Ft.set(!0),n}),wu=vu("close",e=>{h("web_app_close",{return_back:e})}),Su=Ud("mount",Hd),[,Ar,$u]=Fd,[,Cu]=Wd,[zd,Au]=gu,ku=vu("ready",()=>{h("web_app_ready")});function vt(){U($e,$r())}const kr=gt("setBackgroundColor",e=>{e!==Ye()&&(h(mn,{color:e}),Ye.set(e),vt())},mn),Mr=gt("setBottomBarColor",e=>{e!==Ze()&&(h(hn,{color:e}),Ze.set(e),vt())},hn),Pr=gt("setHeaderColor",e=>{e!==Xe()&&(h(Qe,fe(e)?{color:e}:{color_key:e}),Xe.set(e),vt())},Qe,{rgb:[Qe,"color",fe]});function Mu(){Me(Ar),T(_u,yu),zd.set(!1)}const Gd=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:lu,backgroundColorRGB:bt,bindCssVars:Eu,bottomBarColor:pu,bottomBarColorRGB:yt,close:wu,headerColor:du,headerColorRGB:wr,isActive:hu,isCssVarsBound:fu,isDark:mu,isMounted:Au,isMounting:$u,isSupported:bu,mount:Su,mountError:Cu,mountPromise:Ar,ready:ku,setBackgroundColor:kr,setBottomBarColor:Mr,setHeaderColor:Pr,state:$r,unmount:Mu},Symbol.toStringTag,{value:"Module"}));function Qd(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];if(n.length>64)throw new W(`Invalid title: ${n}`);if(!t||t.length>256)throw new W(`Invalid message: ${t}`);if(r.length>3)throw new W(`Invalid buttons count: ${r.length}`);return{title:n,message:t,buttons:r.length?r.map((o,s)=>{const i=o.id||"";if(i.length>64)throw new W(`Button with index ${s} has invalid id: ${i}`);if(!o.type||o.type==="default"||o.type==="destructive"){const a=o.text.trim();if(!a||a.length>64)throw new W(`Button with index ${s} has invalid text: ${a}`);return{type:o.type,text:a,id:i}}return{type:o.type,id:i}}):[{type:"close",id:""}]}}const xr="web_app_open_popup",Jd=V("popup",xr),Pu=Q(xr),[Kd,Yd,Zd]=O(e=>w(xr,"popup_closed",{...e,params:Qd(e)}).then(({button_id:t})=>t===void 0?null:t),"A popup is already opened"),xu=Jd("open",Kd),[,Tu,Bu]=Yd,[,Ou]=Zd,Xd=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Bu,isSupported:Pu,open:xu,openError:Ou,openPromise:Tu},Symbol.toStringTag,{value:"Module"})),qu="web_app_close_scan_qr_popup",Tr="web_app_open_scan_qr_popup",ef="scan_qr_popup_closed",tf="qr_text_received",Iu=V("qrScanner",Tr),ju=Iu("close",()=>{h(qu),Me(Br)}),Du=Q(Tr);function nf(e){e||(e={});const{onCaptured:t,text:n,capture:r}=e,[,o]=Tn(A(ef,()=>{s.resolve()}),A(tf,i=>{t?t(i.data):(!r||r(i.data))&&(s.resolve(i.data),h(qu))})),s=new Pp(e);return(e.postEvent||h)(Tr,{text:n}),x.resolve(s).catch(Vn).finally(o)}const[rf,of,sf]=O(nf,"The QR Scanner is already opened"),Nu=Iu("open",rf),[,Br,Vu]=of,[,Lu]=sf,af=Object.freeze(Object.defineProperty({__proto__:null,close:ju,isOpened:Vu,isSupported:Du,open:Nu,openError:Lu,openPromise:Br},Symbol.toStringTag,{value:"Module"}));function de(e){return _(()=>Et()[e])}const De=ke({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),Et=_(()=>{const e=De();return{...e,backgroundColor:e.backgroundColor||yt()||"#000000",textColor:e.textColor||mt()||"#2481cc"}}),[_n,Or]=b(!1),Ru=de("backgroundColor"),Hu=de("hasShineEffect"),Fu=de("isEnabled"),Wu=de("isLoaderVisible"),Uu=de("isVisible"),zu=de("position"),Gu=de("text"),Qu=de("textColor"),wt="web_app_setup_secondary_button",Ju="secondary_button_pressed",St="secondaryButton",qr=V(St,wt),uf=le(St,Or,wt),Ku=Q(wt),Yu=qr("mount",()=>{if(!_n()){const e=G()&&z(St);e&&De.set(e),_n.set(!0)}}),Zu=qr("onClick",e=>A(Ju,e)),Xu=qr("offClick",e=>{T(Ju,e)}),ec=uf("setParams",e=>{De.set({...De(),...ir(e)}),U(St,De());const t=Et();t.text&&h(wt,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})});function tc(){_n.set(!1)}const cf=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Ru,hasShineEffect:Hu,isEnabled:Fu,isLoaderVisible:Wu,isMounted:Or,isSupported:Ku,isVisible:Uu,mount:Yu,offClick:Xu,onClick:Zu,position:zu,setParams:ec,state:Et,text:Gu,textColor:Qu,unmount:tc},Symbol.toStringTag,{value:"Module"})),$t="web_app_setup_settings_button",nc="settings_button_pressed",Ct="settingsButton",[Co,rc]=b(!1),[et,oc]=b(!1),sc=Q($t),Ir=V(Ct,$t),ic=le(Ct,et,$t),ac=ic("hide",()=>{jr(!1)}),uc=Ir("mount",()=>{et()||(jr(G()&&z(Ct)||!1),et.set(!0))});function jr(e){e!==Co()&&(h($t,{is_visible:e}),U(Ct,e),Co.set(e))}const cc=Ir("onClick",e=>A(nc,e)),lc=Ir("offClick",e=>{T(nc,e)}),pc=ic("show",()=>{jr(!0)});function dc(){et.set(!1)}const lf=Object.freeze(Object.defineProperty({__proto__:null,hide:ac,isMounted:oc,isSupported:sc,isVisible:rc,mount:uc,offClick:lc,onClick:cc,show:pc,unmount:dc},Symbol.toStringTag,{value:"Module"})),At="web_app_setup_swipe_behavior",kt="swipeBehavior",[Re,fc]=b(!1),mc=Q(At),[bn,hc]=b(!0),pf=V(kt,At),_c=le(kt,Re,At),bc=_c("disableVertical",()=>{Dr(!1)}),yc=_c("enableVertical",()=>{Dr(!0)}),gc=pf("mount",()=>{Re()||(Dr(G()&&z(kt)||!1,!0),Re.set(!0))});function Dr(e,t){(e!==bn()||t)&&(h(At,{allow_vertical_swipe:e}),U(kt,e),bn.set(e))}function vc(){Re.set(!1)}const df=Object.freeze(Object.defineProperty({__proto__:null,_isMounted:Re,_isVerticalEnabled:bn,disableVertical:bc,enableVertical:yc,isMounted:fc,isSupported:mc,isVerticalEnabled:hc,mount:gc,unmount:vc},Symbol.toStringTag,{value:"Module"})),ff=Object.freeze(Object.defineProperty({__proto__:null,accentTextColor:Ta,backgroundColor:ze,bindCssVars:ou,bottomBarBgColor:hr,buttonColor:mt,buttonTextColor:mr,destructiveTextColor:Ba,headerBackgroundColor:Oa,hintColor:qa,isCssVarsBound:Pa,isDark:Ia,isMounted:au,isMounting:su,linkColor:ja,mount:vr,mountError:iu,mountPromise:Er,secondaryBackgroundColor:Ve,sectionBackgroundColor:Da,sectionHeaderTextColor:Na,sectionSeparatorColor:Va,state:xa,subtitleTextColor:La,textColor:Ra,unmount:uu},Symbol.toStringTag,{value:"Module"})),be="viewport",Nr="fullscreen_changed",Vr="safe_area_changed",Lr="content_safe_area_changed",Rr="viewport_changed",Ec=pe(be),Ao={left:0,top:0,bottom:0,right:0};function Wt(e){return Math.max(e,0)}const[Ut,Hr]=b({contentSafeAreaInsets:Ao,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:Ao,stableHeight:0,width:0});function ye(e){return _(()=>Hr()[e])}const Mt=ye("height"),Pt=ye("stableHeight"),Fr=ye("width"),wc=ye("isExpanded"),Sc=_(()=>Mt()===Pt());function Pe(e){const{height:t,stableHeight:n,width:r}=e;Ut.set({...Ut(),...ir({...e,height:t?Wt(t):void 0,width:r?Wt(r):void 0,stableHeight:n?Wt(n):void 0})}),U(be,Ut())}function mf(){return z(be)}function xt(e){return _(()=>Tt()[e])}const Tt=ye("contentSafeAreaInsets"),Wr=xt("bottom"),Ur=xt("left"),zr=xt("right"),Gr=xt("top");function Bt(e){return _(()=>Ot()[e])}const Ot=ye("safeAreaInsets"),Qr=Bt("bottom"),Jr=Bt("left"),Kr=Bt("right"),Yr=Bt("top"),$c="web_app_request_safe_area",Cc=V(be,$c),yn=Cc("requestContentSafeAreaInsets",e=>w("web_app_request_content_safe_area",Lr,e));function Ac(e){return w("web_app_request_viewport",Rr,e)}const gn=Cc("requestSafeAreaInsets",e=>w($c,Vr,e)),kc=e=>{const{height:t}=e;Pe({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},Mc=e=>{Pe({isFullscreen:e.is_fullscreen})},Pc=e=>{Pe({safeAreaInsets:e})},xc=e=>{Pe({contentSafeAreaInsets:e})},[hf,_f,bf,yf]=He(be,e=>{const t=G()&&mf();return t?x.resolve(t):x.fn(async n=>{const r=await x.all([gn.isAvailable()?gn(n):Ot(),yn.isAvailable()?yn(n):Tt()]),o=Bn(),s={contentSafeAreaInsets:r[1],isFullscreen:!!o.tgWebAppFullscreen,safeAreaInsets:r[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(o.tgWebAppPlatform)){const i=window;return{...s,height:i.innerHeight,isExpanded:!0,stableHeight:i.innerHeight,width:i.innerWidth}}return Ac(n).then(i=>({...s,height:i.height,isExpanded:i.is_expanded,stableHeight:i.is_state_stable?i.height:0,width:i.width}))},e)},e=>{A(Rr,kc),A(Nr,Mc),A(Vr,Pc),A(Lr,xc),Pe(e)}),Tc=Ec("mount",hf),[,Zr,Bc]=_f,[,Oc]=bf,[Xr,qc]=yf;function Ic(){Me(Zr),T(Rr,kc),T(Nr,Mc),T(Vr,Pc),T(Lr,xc),Xr.set(!1)}const gf=lt(be,Xr),[zt,jc]=b(!1),Dc=gf("bindCssVars",e=>{if(zt())throw new ot;e||(e=n=>`--tg-viewport-${ys(n)}`);const t=[["height",Mt],["stableHeight",Pt],["width",Fr],["safeAreaInsetTop",Yr],["safeAreaInsetBottom",Qr],["safeAreaInsetLeft",Jr],["safeAreaInsetRight",Kr],["contentSafeAreaInsetTop",Gr],["contentSafeAreaInsetBottom",Wr],["contentSafeAreaInsetLeft",Ur],["contentSafeAreaInsetRight",zr]].reduce((n,[r,o])=>{const s=e(r);if(s){const i=()=>{yr(s,`${o()}px`)};n.push([i,o.sub(i),s])}return n},[]);return t.forEach(n=>{n[0]()}),zt.set(!0),()=>{t.forEach(n=>{n[1](),gr(n[2])}),zt.set(!1)}}),Nc=Ec("expand",()=>{h("web_app_expand")}),Vc="web_app_request_fullscreen",vf=le(be,Xr,Vc),eo=ye("isFullscreen"),[Ef,Lc]=b(),[wf,Rc]=b();function Hc(e,t){return vf(e,O(n=>w(t?Vc:"web_app_exit_fullscreen",[Nr,"fullscreen_failed"],n).then(r=>{if("error"in r&&r.error!=="ALREADY_FULLSCREEN")throw new As(r.error);const o="is_fullscreen"in r?r.is_fullscreen:!0;o!==eo()&&Pe({isFullscreen:o})}),"Fullscreen mode change is already being requested",{promise:Ef,error:wf})[0])}const Fc=Hc("requestFullscreen",!0),Wc=Hc("exitFullscreen"),Sf=Object.freeze(Object.defineProperty({__proto__:null,bindCssVars:Dc,changeFullscreenError:Rc,changeFullscreenPromise:Lc,contentSafeAreaInsetBottom:Wr,contentSafeAreaInsetLeft:Ur,contentSafeAreaInsetRight:zr,contentSafeAreaInsetTop:Gr,contentSafeAreaInsets:Tt,exitFullscreen:Wc,expand:Nc,height:Mt,isCssVarsBound:jc,isExpanded:wc,isFullscreen:eo,isMounted:qc,isMounting:Bc,isStable:Sc,mount:Tc,mountError:Oc,mountPromise:Zr,requestFullscreen:Fc,safeAreaInsetBottom:Qr,safeAreaInsetLeft:Jr,safeAreaInsetRight:Kr,safeAreaInsetTop:Yr,safeAreaInsets:Ot,stableHeight:Pt,state:Hr,unmount:Ic,width:Fr},Symbol.toStringTag,{value:"Module"})),Uc="web_app_request_emoji_status_access",[$f,Cf,Af]=O(e=>w(Uc,"emoji_status_access_requested",e).then(t=>t.status),"Emoji status access request is already in progress"),kf=C("requestEmojiStatusAccess",$f,{isSupported:Uc}),[,Mf,Pf]=Cf,[,xf]=Af,zc="web_app_set_emoji_status",[Tf,Bf,Of]=O((e,t)=>w(zc,["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(n=>{if(n&&"error"in n)throw new Cs(n.error)}),"Emoji status set request is currently in progress"),qf=C("setEmojiStatus",Tf,{isSupported:zc}),[,If,jf]=Bf,[,Df]=Of,Nf={isSupported:"web_app_add_to_home_screen"},Gc="home_screen_failed",Vf=C("onAddToHomeScreenFailed",(e,t)=>A(Gc,e,t),{isSupported:"web_app_add_to_home_screen"}),Lf=C("offAddToHomeScreenFailed",e=>{T(Gc,e)},Nf),Qc={isSupported:"web_app_add_to_home_screen"},Jc="home_screen_added",Rf=C("onAddedToHomeScreen",(e,t)=>A(Jc,e,t),Qc),Hf=C("offAddedToHomeScreen",e=>{T(Jc,e)},Qc),ko="web_app_add_to_home_screen",Ff=C("addToHomeScreen",()=>{h(ko)},{isSupported:ko}),Kc="web_app_check_home_screen",[Wf,Uf,zf]=O(e=>w(Kc,"home_screen_checked",e).then(t=>t.status||"unknown"),"Check home screen status request is currently in progress"),Gf=C("checkHomeScreenStatus",Wf,{isSupported:Kc}),[,Qf,Jf]=Uf,[,Kf]=zf,Yf=pe(),Zf=Yf("openLink",(e,t)=>{if(typeof e=="string")try{e=new URL(e)}catch(n){throw new W(`"${e.toString()}" is invalid URL`,n)}t||(t={}),h("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}),Mo="web_app_open_tg_link",Xf=pe(),Yc=Xf("openTelegramLink",e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new W(`"${t}" is invalid URL`);if(!ae(Mo,oe())){window.location.href=t;return}e=new URL(e),h(Mo,{path_full:e.pathname+e.search})}),em=pe(),tm=em("shareURL",(e,t)=>{Yc("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});function nm(e,t){return new x({abortSignal:t,timeout:e}).catch(()=>{})}const Zc="web_app_request_phone",[rm,om,sm]=O(e=>w(Zc,"phone_requested",e).then(t=>t.status),"Phone access request is currently in progress"),Xc=C("requestPhoneAccess",rm,{isSupported:Zc}),[,im,am]=om,[,um]=sm;async function Po(e){const t=await me("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3});return dt(qe(Si([H(),vi(URLSearchParams)]),pr(pn({contact:qe(H(),Sa(),pn({user_id:Kn(),phone_number:H(),first_name:H(),last_name:Ei(H())})),auth_date:qe(H(),Qn(n=>new Date(Number(n)*1e3)),Jn()),hash:H()}))),t)}const[cm,lm,pm]=O(e=>new x(async(t,n,r)=>{try{return t(await Po(r))}catch(i){if(i instanceof ln)throw i}if(await Xc(r)!=="sent")throw new In("User denied access");let s=50;for(;!r.isAborted();){try{return t(await Po(r))}catch(i){if(i instanceof ln)throw i}await nm(s),s+=50}},e),"Contact is already being requested"),dm=C("requestContact",cm,{isSupported:"web_app_request_phone"}),[,fm,mm]=lm,[,hm]=pm,el="web_app_request_write_access",[_m,bm,ym]=O(e=>w(el,"write_access_requested",e).then(t=>t.status),"Write access request is currently in progress"),gm=C("requestWriteAccess",_m,{isSupported:el}),[,vm,Em]=bm,[,wm]=ym;function Sm(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}async function $m(e){try{const{clipboard:t}=navigator;if(t)return await t.writeText(e)}catch{}Sm(e)}const xo="web_app_request_file_download",Cm=C("downloadFile",(e,t,n)=>w(xo,"file_download_requested",{...n,params:{url:e,file_name:t}}).then(r=>{if(r.status!=="downloading")throw new In("User denied the action")}),{isSupported:xo}),Am=C("getCurrentTime",e=>me("getCurrentTime",{},e).then(t=>dt(qe(Kn(),bi(),Qn(n=>new Date(n*1e3)),Jn()),t)),{isSupported:"web_app_invoke_custom_method"}),To="web_app_read_text_from_clipboard",km=C("readTextFromClipboard",e=>{const t=On();return w(To,"clipboard_text_received",{...e,params:{req_id:t},capture:_s(t)}).then(({data:n=null})=>n)},{isSupported:To}),Mm=C("sendData",e=>{const{size:t}=new Blob([e]);if(!t||t>4096)throw new W(t?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data");h("web_app_data_send",{data:e})},{isSupported(){return Bn().tgWebAppBotInline?void 0:"The application must be launched in the inline mode"}}),Bo="web_app_send_prepared_message",Pm=C("shareMessage",(e,t)=>w(Bo,["prepared_message_failed","prepared_message_sent"],{...t,params:{id:e}}).then(n=>{if(n&&"error"in n)throw new ks(n.error)}),{isSupported:Bo}),Oo="web_app_share_to_story",xm=C("shareStory",(e,t)=>{t||(t={}),h(Oo,{text:t.text,media_url:e,widget_link:t.widgetLink})},{isSupported:Oo}),Tm="web_app_switch_inline_query",Bm=C("switchInlineQuery",(e,t)=>{h(Tm,{query:e,chat_types:t||[]})});function Om(e){try{return[!0,e()]}catch(t){return[!1,t]}}function qm(e){Ss(e);const[t,n]=Tn(A("reload_iframe",()=>{rn(!1,"Received a request to reload the page"),h("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:r=!0}=e||{};if(r){const o=document.createElement("style");o.id="telegram-custom-styles",document.head.appendChild(o),t(A("set_custom_style",s=>{o.innerHTML=s}),()=>{document.head.removeChild(o)})}return h("iframe_ready",{reload_supported:!0}),rn(!1,"The package was initialized"),n}exports.AccessDeniedError=In;exports.CSSVarsBoundError=ot;exports.ConcurrentCallError=$s;exports.FullscreenFailedError=As;exports.FunctionUnavailableError=ve;exports.InvalidArgumentsError=W;exports.InvalidEnvError=dp;exports.InvalidLaunchParamsError=ps;exports.InvokeCustomMethodError=fs;exports.LaunchParamsRetrieveError=ls;exports.MethodParameterUnsupportedError=cs;exports.MethodUnsupportedError=us;exports.NotAvailableError=qn;exports.SetEmojiStatusError=Cs;exports.ShareMessageError=ks;exports.UnknownEnvError=ds;exports.addToHomeScreen=Ff;exports.authenticateBiometry=Xs;exports.backButton=Ep;exports.bindMiniAppCssVars=Eu;exports.bindThemeParamsCssVars=ou;exports.bindViewportCssVars=Dc;exports.biometry=Lp;exports.biometryAuthError=ti;exports.biometryAuthPromise=Wn;exports.biometryMountError=Ys;exports.biometryState=Rs;exports.changeFullscreenError=Rc;exports.changeFullscreenPromise=Lc;exports.checkHomeScreenStatus=Gf;exports.checkHomeScreenStatusError=Kf;exports.checkHomeScreenStatusPromise=Qf;exports.closeMiniApp=wu;exports.closeQrScanner=ju;exports.closingBehavior=Hp;exports.cloudStorage=Kp;exports.configure=Ss;exports.copyTextToClipboard=$m;exports.createPostEvent=bs;exports.createRequestId=On;exports.deleteCloudStorageItem=Yn;exports.disableClosingConfirmation=li;exports.disableVerticalSwipes=bc;exports.downloadFile=Cm;exports.emitEvent=en;exports.enableClosingConfirmation=pi;exports.enableVerticalSwipes=yc;exports.exitFullscreen=Wc;exports.expandViewport=Nc;exports.getCloudStorageItem=Ai;exports.getCloudStorageKeys=Zn;exports.getCurrentTime=Am;exports.hapticFeedback=Yp;exports.hapticFeedbackImpactOccurred=Pi;exports.hapticFeedbackNotificationOccurred=xi;exports.hapticFeedbackSelectionChanged=Ti;exports.hideBackButton=Os;exports.hideSettingsButton=ac;exports.ignoreCanceled=Vn;exports.init=qm;exports.initData=Xp;exports.initDataAuthDate=er;exports.initDataCanSendAfter=tr;exports.initDataCanSendAfterDate=qi;exports.initDataChat=Ii;exports.initDataChatInstance=Di;exports.initDataChatType=ji;exports.initDataHash=Ni;exports.initDataQueryId=Vi;exports.initDataRaw=Li;exports.initDataReceiver=Ri;exports.initDataStartParam=Fi;exports.initDataState=Oi;exports.initDataUser=Wi;exports.invoice=sd;exports.invokeCustomMethod=me;exports.isAccessDeniedError=yp;exports.isAuthenticatingBiometry=ei;exports.isBackButtonMounted=xs;exports.isBackButtonSupported=Ts;exports.isBackButtonVisible=Ps;exports.isBiometryAvailable=Hs;exports.isBiometryMounted=Zs;exports.isBiometryMounting=Ks;exports.isBiometrySupported=zs;exports.isCSSVarsBoundError=lp;exports.isCheckingHomeScreenStatus=Jf;exports.isClosingBehaviorMounted=zn;exports.isClosingConfirmationEnabled=ui;exports.isCloudStorageSupported=Ci;exports.isColorDark=fr;exports.isConcurrentCallError=_p;exports.isFullscreen=eo;exports.isFullscreenFailedError=gp;exports.isFunctionNotAvailableError=mp;exports.isHapticFeedbackSupported=Mi;exports.isInvalidArguments=hp;exports.isInvalidEnvError=fp;exports.isInvalidLaunchParamsError=Gl;exports.isInvoiceOpened=Qi;exports.isInvoiceSupported=Ui;exports.isInvokeCustomMethodError=Jl;exports.isLaunchParamsRetrieveError=zl;exports.isLocationManagerAccessGranted=Zi;exports.isLocationManagerAccessRequested=Xi;exports.isLocationManagerAvailable=Yi;exports.isLocationManagerMounted=ia;exports.isLocationManagerMounting=oa;exports.isLocationManagerSupported=Ki;exports.isMainButtonEnabled=Wa;exports.isMainButtonLoaderVisible=Ua;exports.isMainButtonMounted=_r;exports.isMainButtonVisible=za;exports.isMethodMethodParameterUnsupportedError=Wl;exports.isMethodUnsupportedError=Fl;exports.isMiniAppActive=hu;exports.isMiniAppCssVarsBound=fu;exports.isMiniAppDark=mu;exports.isMiniAppMounted=Au;exports.isMiniAppMounting=$u;exports.isMiniAppSupported=bu;exports.isNotAvailableError=pp;exports.isPopupOpened=Bu;exports.isPopupSupported=Pu;exports.isQrScannerOpened=Vu;exports.isQrScannerSupported=Du;exports.isRGB=fe;exports.isRGBShort=Aa;exports.isRequestingBiometryAccess=oi;exports.isRequestingContact=mm;exports.isRequestingEmojiStatusAccess=Pf;exports.isRequestingLocation=ua;exports.isRequestingPhoneAccess=am;exports.isRequestingWriteAccess=Em;exports.isSSR=on;exports.isSecondaryButtonEnabled=Fu;exports.isSecondaryButtonLoaderVisible=Wu;exports.isSecondaryButtonMounted=Or;exports.isSecondaryButtonSupported=Ku;exports.isSecondaryButtonVisible=Uu;exports.isSetEmojiStatusError=bp;exports.isSettingEmojiStatus=jf;exports.isSettingsButtonMounted=oc;exports.isSettingsButtonSupported=sc;exports.isSettingsButtonVisible=rc;exports.isShareMessageError=vp;exports.isSwipeBehaviorMounted=fc;exports.isSwipeBehaviorSupported=mc;exports.isTMA=tn;exports.isThemeParamsCssVarsBound=Pa;exports.isThemeParamsDark=Ia;exports.isThemeParamsMounted=au;exports.isThemeParamsMounting=su;exports.isUnknownEnvError=Ql;exports.isVerticalSwipesEnabled=hc;exports.isViewportCssVarsBound=jc;exports.isViewportExpanded=wc;exports.isViewportMounted=qc;exports.isViewportMounting=Bc;exports.isViewportStable=Sc;exports.locationManager=hd;exports.locationManagerMountError=sa;exports.locationManagerMountPromise=ra;exports.mainButton=Id;exports.mainButtonBackgroundColor=Ha;exports.mainButtonHasShineEffect=Fa;exports.mainButtonState=ht;exports.mainButtonText=Ga;exports.mainButtonTextColor=Qa;exports.miniApp=Gd;exports.miniAppBackgroundColor=lu;exports.miniAppBackgroundColorRGB=bt;exports.miniAppBottomBarColor=pu;exports.miniAppBottomBarColorRGB=yt;exports.miniAppHeaderColor=du;exports.miniAppHeaderColorRGB=wr;exports.miniAppMountError=Cu;exports.miniAppMountPromise=Ar;exports.miniAppReady=ku;exports.miniAppState=$r;exports.mockTelegramEnv=Xl;exports.mountBackButton=qs;exports.mountBiometry=Js;exports.mountBiometryPromise=Fn;exports.mountClosingBehavior=di;exports.mountLocationManager=na;exports.mountMainButton=Ka;exports.mountMiniApp=Su;exports.mountSecondaryButton=Yu;exports.mountSettingsButton=uc;exports.mountSwipeBehavior=gc;exports.mountThemeParams=vr;exports.mountViewport=Tc;exports.off=T;exports.offAddToHomeScreenFailed=Lf;exports.offAddedToHomeScreen=Hf;exports.offBackButtonClick=js;exports.offMainButtonClick=Za;exports.offSecondaryButtonClick=Xu;exports.offSettingsButtonClick=lc;exports.on=A;exports.onAddToHomeScreenFailed=Vf;exports.onAddedToHomeScreen=Rf;exports.onBackButtonClick=Is;exports.onMainButtonClick=Ya;exports.onSecondaryButtonClick=Zu;exports.onSettingsButtonClick=cc;exports.openBiometrySettings=ni;exports.openInvoice=zi;exports.openInvoiceError=Ji;exports.openInvoicePromise=Gi;exports.openLink=Zf;exports.openLocationManagerSettings=la;exports.openPopup=xu;exports.openPopupError=Ou;exports.openPopupPromise=Tu;exports.openQrScanner=Nu;exports.openQrScannerError=Lu;exports.openQrScannerPromise=Br;exports.openTelegramLink=Yc;exports.parseInitDataQuery=xd;exports.parseLaunchParamsQuery=Td;exports.popup=Xd;exports.postEvent=h;exports.qrScanner=af;exports.readTextFromClipboard=km;exports.request=w;exports.requestBiometry=Fs;exports.requestBiometryAccess=ri;exports.requestBiometryAccessError=si;exports.requestBiometryAccessPromise=Un;exports.requestContact=dm;exports.requestContactError=hm;exports.requestContactPromise=fm;exports.requestContentSafeAreaInsets=yn;exports.requestEmojiStatusAccess=kf;exports.requestEmojiStatusAccessError=xf;exports.requestEmojiStatusAccessPromise=Mf;exports.requestFullscreen=Fc;exports.requestLocation=aa;exports.requestLocationError=ca;exports.requestLocationPromise=sr;exports.requestPhoneAccess=Xc;exports.requestPhoneAccessError=um;exports.requestPhoneAccessPromise=im;exports.requestSafeAreaInsets=gn;exports.requestViewport=Ac;exports.requestWriteAccess=gm;exports.requestWriteAccessError=wm;exports.requestWriteAccessPromise=vm;exports.restoreInitData=Hi;exports.retrieveLaunchParams=rt;exports.retrieveRawInitData=hs;exports.retrieveRawLaunchParams=xn;exports.safeCall=Om;exports.secondaryButton=cf;exports.secondaryButtonBackgroundColor=Ru;exports.secondaryButtonHasShineEffect=Hu;exports.secondaryButtonPosition=zu;exports.secondaryButtonState=Et;exports.secondaryButtonText=Gu;exports.secondaryButtonTextColor=Qu;exports.sendData=Mm;exports.serializeInitDataQuery=Ma;exports.serializeLaunchParamsQuery=Bd;exports.serializeToQuery=dr;exports.setCloudStorageItem=ki;exports.setDebug=up;exports.setEmojiStatus=qf;exports.setEmojiStatusError=Df;exports.setEmojiStatusPromise=If;exports.setMainButtonParams=Xa;exports.setMiniAppBackgroundColor=kr;exports.setMiniAppBottomBarColor=Mr;exports.setMiniAppHeaderColor=Pr;exports.setSecondaryButtonParams=ec;exports.settingsButton=lf;exports.shareMessage=Pm;exports.shareStory=xm;exports.shareURL=tm;exports.showBackButton=Ds;exports.showSettingsButton=pc;exports.supports=ae;exports.swipeBehavior=df;exports.switchInlineQuery=Bm;exports.targetOrigin=ms;exports.themeParams=ff;exports.themeParamsAccentTextColor=Ta;exports.themeParamsBackgroundColor=ze;exports.themeParamsBottomBarBgColor=hr;exports.themeParamsButtonColor=mt;exports.themeParamsButtonTextColor=mr;exports.themeParamsDestructiveTextColor=Ba;exports.themeParamsHeaderBackgroundColor=Oa;exports.themeParamsHintColor=qa;exports.themeParamsLinkColor=ja;exports.themeParamsMountError=iu;exports.themeParamsMountPromise=Er;exports.themeParamsSecondaryBackgroundColor=Ve;exports.themeParamsSectionBackgroundColor=Da;exports.themeParamsSectionHeaderTextColor=Na;exports.themeParamsSectionSeparatorColor=Va;exports.themeParamsState=xa;exports.themeParamsSubtitleTextColor=La;exports.themeParamsTextColor=Ra;exports.toRGB=ka;exports.transformQueryUsing=pr;exports.unmountBackButton=Ns;exports.unmountBiometry=ii;exports.unmountClosingBehavior=fi;exports.unmountLocationManager=pa;exports.unmountMainButton=eu;exports.unmountMiniApp=Mu;exports.unmountSecondaryButton=tc;exports.unmountSettingsButton=dc;exports.unmountSwipeBehavior=vc;exports.unmountThemeParams=uu;exports.unmountViewport=Ic;exports.updateBiometryToken=ai;exports.viewport=Sf;exports.viewportContentSafeAreaInsetBottom=Wr;exports.viewportContentSafeAreaInsetLeft=Ur;exports.viewportContentSafeAreaInsetRight=zr;exports.viewportContentSafeAreaInsetTop=Gr;exports.viewportContentSafeAreaInsets=Tt;exports.viewportHeight=Mt;exports.viewportMountError=Oc;exports.viewportMountPromise=Zr;exports.viewportSafeAreaInsetBottom=Qr;exports.viewportSafeAreaInsetLeft=Jr;exports.viewportSafeAreaInsetRight=Kr;exports.viewportSafeAreaInsetTop=Yr;exports.viewportSafeAreaInsets=Ot;exports.viewportStableHeight=Pt;exports.viewportState=Hr;exports.viewportWidth=Fr;exports.wrapSafe=C;
//# sourceMappingURL=index.cjs.map
